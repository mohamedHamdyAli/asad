import{l as h,p as T,c as O,o as d,w as E,b as t,j as x,f as c,h as v,s as w,t as r,e as F,v as z,F as G,q as H,a as k,u as L,S as J}from"./app-C-x1AC2s.js";import{I as N,_ as K}from"./AuthenticatedLayout-gdQDWDWu.js";import{h as g}from"./http-CwBICM-q.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";const $={list:(s={})=>g.get("/api/language/list",{params:s}),create:s=>g.post("/api/language/create",s),show:s=>g.get(`/api/language/${s}`),update:(s,u)=>g.post(`/api/language/${s}`,u),remove:s=>g.delete(`/api/language/delete/${s}`),setUI:s=>g.post(`/api/set-language/${s}`),getFile:(s,u)=>g.get(`/api/language/languageedit/${s}/${u}`),saveFile:(s,u,p)=>g.post(`/api/language/updatelanguageValues/${s}/${u}`,{values:p})},Q={class:"p-6"},W={class:"flex flex-col lg:flex-row gap-6 items-start"},X={class:"w-full lg:w-1/4"},Y={class:"bg-white rounded-xl shadow-lg p-6"},Z={class:"grid gap-3 mb-4"},ee={key:0,class:"text-xs text-red-600 mt-1"},te={key:0,class:"text-xs text-red-600 mt-1"},ae={key:0,class:"text-xs text-red-600 mt-1"},ne={key:0,class:"text-xs text-red-600 mt-1"},oe={key:0,class:"text-xs text-red-600 mt-1"},se={class:"flex items-center gap-2 text-sm text-gray-600"},le=["disabled"],ie={class:"w-full lg:w-3/4"},de={class:"bg-white shadow rounded-lg p-4 h-[600px] overflow-y-auto"},ue={class:"font-bold text-gray-800"},ce={class:"text-sm text-gray-500"},re={class:"Lang-image"},ge=["src","alt"],pe={class:"flex gap-3 items-center"},me={class:"relative"},ve=["onClick"],fe={key:0,class:"absolute z-[100] mt-2 w-48 bg-white border rounded shadow -left-24"},_e=["onClick"],he={__name:"LanguageManagement",setup(s){const u=h([]),p=h({}),y=h(!1),n=h({name:"",name_en:"",code:"",country_code:"",rtl:!1,icon:null}),f=h({}),i=a=>{var e;return(e=f.value)!=null&&e[a]?f.value[a]:""};function U(a){var e;n.value.icon=((e=a.target.files)==null?void 0:e[0])||null}function j(){const a={};return n.value.name||(a.name="Language name is required."),n.value.code?n.value.code.length>10&&(a.code="Code must be ≤ 10 characters."):a.code="Code is required.",n.value.country_code&&n.value.country_code.length>5&&(a.country_code="Country code must be ≤ 5 characters."),f.value=a,Object.keys(a).length===0}async function C(){const{data:a}=await $.list();u.value=a.data||[]}T(C);async function I(){var a,e,o,_;if(j()){y.value=!0;try{const l=new FormData;l.append("name",n.value.name),l.append("name_en",n.value.english_name||""),l.append("code",n.value.code),l.append("country_code",n.value.country_code||""),l.append("app_scope","all"),l.append("rtl",n.value.rtl?1:0),n.value.icon&&l.append("icon",n.value.icon),await $.create(l),S(),await C()}catch(l){const m=(e=(a=l==null?void 0:l.response)==null?void 0:a.data)==null?void 0:e.errors;if(m&&typeof m=="object"){const V={};Object.keys(m).forEach(b=>{V[b]=Array.isArray(m[b])?m[b][0]:String(m[b])}),f.value=V}else alert(((_=(o=l==null?void 0:l.response)==null?void 0:o.data)==null?void 0:_.message)||"Create failed")}finally{y.value=!1}}}function S(){n.value={name:"",english_name:"",code:"",country_code:"",scope:"",rtl:!1,icon:null},f.value={}}function A(a){p.value[a]=!p.value[a]}function D(a){p.value[a]=!1}function B(a,e="all"){return`/language/editor/${a}/${e}`}async function R(a){confirm(`Delete ${a.name}?`)&&(await $.remove(a.id),await C())}const M=["https://flagcdn.com/w320/us.png","https://flagcdn.com/w320/fr.png","https://flagcdn.com/w320/de.png","https://flagcdn.com/w320/eg.png","https://flagcdn.com/w320/jp.png"];function q(a){const e=Math.floor(Math.random()*M.length);a.target.src=M[e]}return(a,e)=>(d(),O(K,null,{default:E(()=>[t("div",Q,[e[9]||(e[9]=t("h2",{class:"text-2xl font-semibold text-gray-800 mb-6"},"Language Management",-1)),t("div",W,[t("div",X,[t("div",Y,[e[6]||(e[6]=t("h3",{class:"text-xl font-bold text-gray-800 mb-6"},"Add New Language",-1)),t("div",Z,[t("div",null,[x(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>n.value.name=o),type:"text",placeholder:"Language Name",class:"form-input"},null,512),[[w,n.value.name,void 0,{trim:!0}]]),i("name")?(d(),c("p",ee,r(i("name")),1)):v("",!0)]),t("div",null,[x(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>n.value.english_name=o),type:"text",placeholder:"Language Name (English)",class:"form-input"},null,512),[[w,n.value.english_name,void 0,{trim:!0}]]),i("english_name")?(d(),c("p",te,r(i("english_name")),1)):v("",!0)]),t("div",null,[x(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>n.value.code=o),type:"text",placeholder:"Code (e.g., ar, en)",class:"form-input"},null,512),[[w,n.value.code,void 0,{trim:!0}]]),i("code")?(d(),c("p",ae,r(i("code")),1)):v("",!0)]),t("div",null,[x(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>n.value.country_code=o),type:"text",placeholder:"Country Code (e.g., EG, US)",class:"form-input"},null,512),[[w,n.value.country_code,void 0,{trim:!0}]]),i("country_code")?(d(),c("p",ne,r(i("country_code")),1)):v("",!0)]),t("div",null,[t("input",{type:"file",accept:"image/*",class:"form-input",onChange:U},null,32),i("icon")?(d(),c("p",oe,r(i("icon")),1)):v("",!0)]),t("label",se,[x(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>n.value.rtl=o),type:"checkbox"},null,512),[[z,n.value.rtl]]),e[5]||(e[5]=F(" RTL (Right to Left) "))]),t("button",{disabled:y.value,onClick:I,class:"bg-gray-800 text-white px-3 py-2 rounded hover:bg-gray-700 disabled:opacity-50"},r(y.value?"Saving…":"+ Add New Language"),9,le)])])]),t("div",ie,[t("div",de,[e[8]||(e[8]=t("h3",{class:"text-lg font-semibold mb-4"},"Languages",-1)),(d(!0),c(G,null,H(u.value,o=>(d(),c("div",{key:o.id,class:"border-b py-3 px-2 flex justify-between items-center"},[t("div",null,[t("div",ue,r(o.name),1),t("div",ce,"Code: "+r(o.code),1)]),t("div",re,[t("img",{src:o.icon_url||`/images/flags/${o.code}.png`,alt:o.name,class:"w-8 h-6 object-cover",onError:q},null,40,ge)]),t("div",pe,[t("div",me,[t("button",{onClick:_=>A(o.id),title:"Edit",class:"text-blue-600 hover:text-blue-800"},[k(L(N),{icon:"mdi:pencil-outline",class:"w-5 h-5"})],8,ve),p.value[o.id]?(d(),c("div",fe,[k(L(J),{class:"block px-4 py-2 text-sm hover:bg-gray-100",href:B(o.id,"all"),onClick:_=>D(o.id)},{default:E(()=>e[7]||(e[7]=[F(" Edit Language keywords ")])),_:2},1032,["href","onClick"])])):v("",!0)]),t("button",{onClick:_=>R(o),title:"Delete",class:"text-red-600 hover:text-red-800"},[k(L(N),{icon:"mdi:trash-can-outline",class:"w-5 h-5"})],8,_e)])]))),128))])])])])]),_:1}))}},Ce=P(he,[["__scopeId","data-v-84f80083"]]);export{Ce as default};
