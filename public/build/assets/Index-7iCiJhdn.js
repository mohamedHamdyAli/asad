import{p as f,r as le,i as I,C as De,q as Pe,c as Ae,o,w as k,b as t,f as n,h as u,j as x,k as y,y as O,F as V,s as N,t as r,e as h,a as q,u as j,S as U,A as Ve,d as Ne,n as _,B as ae}from"./app-BzxX0dK2.js";import{_ as Le}from"./AuthenticatedLayout-Ci_ZkNzf.js";import{M as Se}from"./MapPicker-u_EPe2yl.js";import{U as L,b as Ee,a as $e}from"./units-DXUviGSD.js";import{U as Me}from"./users-3R9Q0Ztg.js";import{V as Re}from"./vendors-D7hrMBPB.js";import{_ as Ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Oe={class:"p-6 space-y-6"},Fe={class:"bg-white p-4 rounded-xl shadow-sm ring-1 ring-black/5"},Ge={class:"grid grid-cols-1 md:grid-cols-4 gap-3"},Te={class:"bg-white rounded-xl shadow-sm ring-1 ring-black/5 overflow-x-auto"},ze={class:"min-w-full text-sm"},Be={key:0},Ye={class:"px-4 py-2"},He={class:"px-4 py-2"},Ke={class:"font-medium text-gray-900"},Je={class:"text-gray-500",dir:"rtl"},Qe={class:"px-4 py-2"},We={class:"text-gray-900"},Xe={key:0,class:"text-xs text-gray-500"},Ze={class:"px-4 py-2"},et={class:"px-4 py-2"},tt={class:"inline-flex items-center rounded-full bg-gray-100 px-2 py-0.5 text-xs border"},st={class:"px-4 py-2"},lt={class:"flex items-center gap-2 flex-nowrap whitespace-nowrap"},at=["href"],ot=["onClick"],nt=["onClick"],rt={key:1},it={class:"flex items-center justify-between px-4 py-3 border-t"},dt={class:"text-xs text-gray-500"},ut={class:"flex items-center gap-2"},ct=["disabled"],vt={class:"text-sm"},pt=["disabled"],mt={key:0,class:"fixed inset-0 z-50 modal-top"},xt={class:"relative mx-auto w-full max-w-5xl p-6 sm:p-8 h-full flex items-center justify-center"},gt={class:"bg-white rounded-2xl shadow-2xl w-full max-h-[90vh] overflow-y-auto transition-all"},ft={key:0,class:"p-5 text-sm text-gray-500"},bt={key:1,class:"p-6 space-y-6"},yt={class:"relative rounded-xl overflow-hidden shadow-md h-64 sm:h-72 md:h-80"},_t=["src"],ht={key:1,class:"absolute inset-0 flex items-center justify-center bg-gray-100 text-gray-400 text-sm"},wt={class:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent flex flex-col justify-end p-6 text-white"},kt={class:"text-2xl font-bold"},qt={key:0,class:"text-sm text-gray-200",dir:"rtl"},Ct={class:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm"},jt={class:"bg-gray-50 rounded-lg p-3"},Ut={class:"font-semibold text-gray-800"},Dt={class:"bg-gray-50 rounded-lg p-3"},Pt={class:"font-semibold text-gray-800"},At={class:"bg-gray-50 rounded-lg p-3"},Vt={class:"font-semibold text-gray-800"},Nt={class:"bg-white border rounded-xl p-5 shadow-sm"},Lt={class:"text-sm text-gray-700 whitespace-pre-wrap mb-4"},St={class:"text-sm text-gray-700 whitespace-pre-wrap",dir:"rtl"},Et={key:0,class:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2"},$t=["src"],Mt={key:1,class:"text-sm text-gray-500"},Rt={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-4 gap-3 pt-4 border-t"},It={class:"relative mx-auto w-full max-w-3xl p-4 sm:p-6 h-full flex items-center justify-center"},Ot={class:"bg-white rounded-2xl shadow-lg w-full max-h-[min(88vh,900px)] overflow-y-auto focus:outline-none"},Ft={class:"sticky top-0 z-10 bg-white border-b rounded-t-2xl"},Gt={class:"flex items-center justify-between px-5 py-3"},Tt={class:"text-lg font-bold"},zt={class:"px-5 py-4 space-y-4"},Bt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Yt=["required"],Ht={key:0,class:"mt-1 text-xs text-red-600"},Kt=["required"],Jt={key:0,class:"mt-1 text-xs text-red-600"},Qt={class:"md:col-span-2"},Wt=["required"],Xt={key:0,class:"mt-1 text-xs text-red-600"},Zt={class:"md:col-span-2"},es=["required"],ts={key:0,class:"mt-1 text-xs text-red-600"},ss={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ls={class:"md:col-span-2"},as=["required"],os={key:0,class:"mt-1 text-xs text-red-600"},ns=["required"],rs={key:0,class:"mt-1 text-xs text-red-600"},is=["required"],ds={key:0,class:"mt-1 text-xs text-red-600"},us=["required"],cs={key:0,class:"mt-1 text-xs text-red-600"},vs=["required"],ps={key:0,class:"mt-1 text-xs text-red-600"},ms={class:"md:col-span-2"},xs={class:"flex items-center justify-between mb-2"},gs={key:0,class:"space-y-2"},fs=["onUpdate:modelValue"],bs=["onClick"],ys={key:1,class:"mt-1 text-xs text-red-600"},_s={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},hs=["required"],ws=["value"],ks={key:0,class:"mt-1 text-xs text-red-600"},qs=["required"],Cs=["value"],js={key:0,class:"mt-1 text-xs text-red-600"},Us={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ds={class:"block text-xs text-gray-500 mb-1"},Ps=["required"],As={key:0,class:"mt-1 text-xs text-red-600"},Vs={key:1,class:"mt-2 relative inline-block"},Ns=["src"],Ls=["required"],Ss={key:0,class:"mt-1 text-xs text-red-600"},Es={key:1,class:"mt-2 flex flex-wrap gap-2"},$s=["src"],Ms=["onClick"],Rs={key:2,class:"mt-2 flex flex-wrap gap-2"},Is=["src"],Os=["onClick"],Fs={key:0,class:"rounded border border-red-200 bg-red-50 text-red-700 px-3 py-2"},Gs={class:"sticky bottom-0 z-10 bg-white border-t rounded-b-2xl"},Ts={class:"px-5 py-3 flex items-center gap-3"},zs=["disabled"],Bs={__name:"Index",setup(Ys){const J=f([]),F=f(!1),p=le({q:"",status:"",from:"",to:""}),D=f(1),S=f(10),$=I(()=>{let s=[...J.value];const e=p.q.trim().toLowerCase();return e&&(s=s.filter(i=>(i.name_en||"").toLowerCase().includes(e)||(i.name_ar||"").toLowerCase().includes(e)||(i.location||"").toLowerCase().includes(e))),p.status&&(s=s.filter(i=>i.status===p.status)),p.from&&(s=s.filter(i=>!i.start_date||i.start_date>=p.from)),p.to&&(s=s.filter(i=>!i.end_date||i.end_date<=p.to)),s.sort((i,l)=>{const g=Date.parse(i.created_at||i.createdAt||""),w=Date.parse(l.created_at||l.createdAt||"");return Number.isNaN(g)||Number.isNaN(w)?(l.id||0)-(i.id||0):w-g}),s}),z=I(()=>(D.value-1)*S.value),Q=I(()=>Math.min(z.value+S.value,$.value.length)),oe=I(()=>$.value.slice(z.value,Q.value));De([()=>p.q,()=>p.status,()=>p.from,()=>p.to,S],()=>{D.value=1});async function B(){F.value=!0;try{J.value=await L.list()}finally{F.value=!1}}const W=f(!1),Y=le({loading:!1,data:null}),v=I(()=>Y.data||{});function H(){W.value=!1,Y.data=null}const G=f(!1),c=f(null),C=f({}),P=f(""),T=f(!1),a=f({name:{en:"",ar:""},description:{en:"",ar:""},location:"",lat:null,long:null,start_date:"",end_date:"",extension_dates:[],user_id:null,vendor_id:null,status:"under_construction",cover_image:null,gallery:[]}),A=f(null),M=f([]),E=f([]),X=f([]),Z=f([]),m=(s,e)=>{if(!e||Array.isArray(e)&&e.length===0){delete C.value[s];return}C.value[s]=Array.isArray(e)?e:[String(e)]},d=s=>{var e;return((e=C.value[s])==null?void 0:e[0])||""},ne=s=>!!C.value[s],b=s=>["form-input",ne(s)?"border-red-400 focus:ring-red-500":""].join(" ");function re(s){return`/projects-management/${s}/docs`}function ie(s){return`/projects-management/${s}/gallery`}function de(s){return`/projects-management/${s}/drawing`}function ue(s){return`/projects-management/${s}/reports`}function ce(s){return`/projects-management/${s}/phases`}function ve(s){return`/projects-management/${s}/timeline`}function pe(s){return`/projects-management/${s}/contractors`}function me(s){return`/projects-management/${s}/payments`}function xe(s){return`/projects-management/${s}/details`}function K(s){return s?String(s).replace(" ","T").slice(0,16):""}function ee(){const s=document.querySelector(".max-h-\\[min\\(88vh\\,900px\\)\\]"),e=s==null?void 0:s.querySelector("input.border-red-400, select.border-red-400, textarea.border-red-400");e&&e.scrollIntoView({behavior:"smooth",block:"center"})}function ge(){C.value={},P.value="";const s=a.value,e=i=>i!=null&&String(i).trim()!=="";return c.value?(s.lat!==null&&(s.lat<-90||s.lat>90)&&m("lat","Latitude must be between -90 and 90"),s.long!==null&&(s.long<-180||s.long>180)&&m("long","Longitude must be between -180 and 180"),e(s.start_date)&&e(s.end_date)&&new Date(s.end_date)<new Date(s.start_date)&&m("end_date","End date must be after or equal to start date")):(e(s.name.en)||m("name.en","Name (EN) is required"),e(s.name.ar)||m("name.ar","Name (AR) is required"),e(s.description.en)||m("description.en","Description (EN) is required"),e(s.description.ar)||m("description.ar","Description (AR) is required"),e(s.location)||m("location","Location is required"),typeof s.lat=="number"&&s.lat>=-90&&s.lat<=90||m("lat","Latitude must be between -90 and 90"),typeof s.long=="number"&&s.long>=-180&&s.long<=180||m("long","Longitude must be between -180 and 180"),e(s.start_date)||m("start_date","Start date is required"),e(s.end_date)||m("end_date","End date is required"),e(s.start_date)&&e(s.end_date)&&new Date(s.end_date)<new Date(s.start_date)&&m("end_date","End date must be after or equal to start date"),e(s.user_id)||m("user_id","User is required"),e(s.vendor_id)||m("vendor_id","Vendor is required"),s.cover_image||m("cover_image","Cover image is required"),(!Array.isArray(s.gallery)||s.gallery.length===0)&&m("gallery","Add at least one gallery image")),Object.keys(C.value).length?(P.value="Please fix the highlighted fields.",!1):!0}function fe(){te(),G.value=!0}async function be(s){te(),c.value=s.id;const e=await L.show(s.id);a.value.name.en=e.name_en||"",a.value.name.ar=e.name_ar||"",a.value.description.en=e.description_en||"",a.value.description.ar=e.description_ar||"",a.value.location=e.location||"",a.value.lat=e.lat,a.value.long=e.long,a.value.start_date=K(e.start_date),a.value.end_date=K(e.end_date),a.value.extension_dates=Array.isArray(e.extension_dates)?e.extension_dates.map(K):[],a.value.user_id=e.user_id??null,a.value.vendor_id=e.vendor_id??null,a.value.status=e.status||"under_construction",A.value=e.cover_image_url||null,E.value=Array.isArray(e.gallery)?e.gallery:[],G.value=!0}function te(){a.value={name:{en:"",ar:""},description:{en:"",ar:""},location:"",lat:null,long:null,start_date:"",end_date:"",extension_dates:[],user_id:null,vendor_id:null,status:"under_construction",cover_image:null,gallery:[]},A.value=null,M.value=[],E.value=[],C.value={},P.value="",c.value=null}function R(){G.value=!1}function ye(s){var i;const e=((i=s.target.files)==null?void 0:i[0])||null;a.value.cover_image=e,A.value=e?URL.createObjectURL(e):A.value}function _e(s){const e=Array.from(s.target.files||[]);a.value.gallery=e,M.value=e.map(i=>URL.createObjectURL(i))}async function he(){confirm("Delete cover image?")&&(await L.deleteCover(c.value),A.value=null)}async function we(s){confirm("Delete this image?")&&(await L.deleteGalleryImage(c.value,s),E.value=E.value.filter(e=>e.id!==s))}function ke(s){var i,l,g,w;const e=(l=(i=s==null?void 0:s.response)==null?void 0:i.data)==null?void 0:l.errors;if(!e)return!1;C.value={};for(const[je,Ue]of Object.entries(e))m(je,Ue);return P.value=((w=(g=s==null?void 0:s.response)==null?void 0:g.data)==null?void 0:w.message)||"Validation failed. Please review the fields below.",!0}async function se(){var s,e,i;T.value=!0;try{if(!ge()){await ae(),ee();return}if(c.value){const l=Ee(a.value);await L.update(c.value,l)}else{const l=$e(a.value);await L.create(l)}await B(),R()}catch(l){((s=l==null?void 0:l.response)==null?void 0:s.status)===422&&ke(l)?(await ae(),ee()):P.value=((i=(e=l==null?void 0:l.response)==null?void 0:e.data)==null?void 0:i.message)||(l==null?void 0:l.message)||"Request failed"}finally{T.value=!1}}async function qe(s){confirm(`Delete unit #${s.id}?`)&&(await L.remove(s.id),await B())}async function Ce(){const s=await Me.list();X.value=s.map(i=>({id:i.id,name:i.name,email:i.email}));const e=await Re.list();Z.value=e.map(i=>({id:i.id,name:i.name,email:i.email}))}return Pe(async()=>{await Promise.all([B(),Ce()])}),(s,e)=>(o(),Ae(Le,null,{default:k(()=>{var i;return[t("div",Oe,[t("div",{class:"flex items-center justify-between"},[e[23]||(e[23]=t("h2",{class:"text-2xl font-bold text-dash-title"},"Projects",-1)),t("button",{onClick:fe,class:"bg-black text-white px-3 py-2 rounded hover:bg-gray-700"}," + Add Project ")]),t("div",Fe,[t("div",Ge,[x(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>p.q=l),type:"text",placeholder:"Search by name or locationâ€¦",class:"form-input"},null,512),[[y,p.q,void 0,{trim:!0}]]),x(t("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>p.status=l),class:"form-input"},e[24]||(e[24]=[t("option",{value:""},"All statuses",-1),t("option",{value:"under_construction"},"under_construction",-1),t("option",{value:"completed"},"completed",-1)]),512),[[O,p.status]]),x(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>p.from=l),type:"date",class:"form-input"},null,512),[[y,p.from]]),x(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>p.to=l),type:"date",class:"form-input"},null,512),[[y,p.to]])])]),t("div",Te,[t("table",ze,[e[27]||(e[27]=t("thead",{class:"bg-gray-50 text-gray-600"},[t("tr",null,[t("th",{class:"px-4 py-2 text-left"},"ID"),t("th",{class:"px-4 py-2 text-left"},"Name (EN / AR)"),t("th",{class:"px-4 py-2 text-left"},"Location"),t("th",{class:"px-4 py-2 text-left"},"Period"),t("th",{class:"px-4 py-2 text-left"},"Status"),t("th",{class:"px-4 py-2 text-left"},"Actions")])],-1)),t("tbody",null,[F.value?(o(),n("tr",Be,e[25]||(e[25]=[t("td",{colspan:"6",class:"px-4 py-6 text-center text-gray-500"},"Loadingâ€¦",-1)]))):u("",!0),(o(!0),n(V,null,N(oe.value,l=>(o(),n("tr",{key:l.id,class:"border-t"},[t("td",Ye,"#"+r(l.id),1),t("td",He,[t("div",Ke,r(l.name_en||"â€”"),1),t("div",Je,r(l.name_ar),1)]),t("td",Qe,[t("div",We,r(l.location||"â€”"),1),l.lat&&l.long?(o(),n("div",Xe,"("+r(l.lat)+", "+r(l.long)+")",1)):u("",!0)]),t("td",Ze,[t("div",null,r(l.start_date||"â€”")+" â†’ "+r(l.end_date||"â€”"),1)]),t("td",et,[t("span",tt,r(l.status||"â€”"),1)]),t("td",st,[t("div",lt,[t("a",{href:xe(l.id),target:"_blank",rel:"noopener noreferrer",class:"inline-flex items-center justify-center h-9 px-3 text-xs font-medium border rounded-md hover:bg-gray-50"}," Details ",8,at),t("button",{class:"inline-flex items-center justify-center h-9 px-3 text-xs font-medium border rounded-md hover:bg-gray-50",onClick:g=>be(l)}," Edit ",8,ot),t("button",{class:"inline-flex items-center justify-center h-9 px-3 text-xs font-medium border rounded-md text-red-600 hover:bg-red-50",onClick:g=>qe(l)}," Delete ",8,nt)])])]))),128)),!F.value&&!$.value.length?(o(),n("tr",rt,e[26]||(e[26]=[t("td",{colspan:"6",class:"px-4 py-8 text-center text-gray-500"},"No Projects found.",-1)]))):u("",!0)])]),t("div",it,[t("div",dt,[e[28]||(e[28]=h(" Showing ")),t("strong",null,r(z.value+1),1),e[29]||(e[29]=h("â€“")),t("strong",null,r(Q.value),1),e[30]||(e[30]=h(" of ")),t("strong",null,r($.value.length),1)]),t("div",ut,[t("button",{class:"px-3 py-1.5 border rounded disabled:opacity-50",disabled:D.value===1,onClick:e[4]||(e[4]=l=>D.value--)}," Prev ",8,ct),t("span",vt,"Page "+r(D.value),1),t("button",{class:"px-3 py-1.5 border rounded disabled:opacity-50",disabled:D.value*S.value>=$.value.length,onClick:e[5]||(e[5]=l=>D.value++)}," Next ",8,pt),x(t("select",{"onUpdate:modelValue":e[6]||(e[6]=l=>S.value=l),class:"form-input w-24"},e[31]||(e[31]=[t("option",{value:10},"10",-1),t("option",{value:20},"20",-1),t("option",{value:50},"50",-1)]),512),[[O,S.value,void 0,{number:!0}]])])])]),W.value?(o(),n("div",mt,[t("div",{class:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:H}),t("div",xt,[t("div",gt,[t("div",{class:"sticky top-0 bg-gradient-to-r from-yellow-50 to-yellow-100 border-b px-6 py-4 rounded-t-2xl flex items-center justify-between"},[e[32]||(e[32]=t("h3",{class:"text-xl font-bold text-gray-800 flex items-center gap-2"}," Project Details ",-1)),t("button",{onClick:H,class:"text-gray-500 hover:text-gray-800 hover:bg-gray-100 rounded-full p-2"}," âœ• ")]),Y.loading?(o(),n("div",ft,"Loadingâ€¦")):(o(),n("div",bt,[t("div",yt,[v.value.cover_image_url?(o(),n("img",{key:0,src:v.value.cover_image_url,alt:"Project Cover",class:"absolute inset-0 w-full h-full object-cover"},null,8,_t)):(o(),n("div",ht," No Cover Image ")),t("div",wt,[t("div",kt,r(v.value.name_en||"Unnamed Project"),1),v.value.name_ar?(o(),n("div",qt,r(v.value.name_ar),1)):u("",!0)])]),t("div",Ct,[t("div",jt,[e[33]||(e[33]=t("span",{class:"block text-gray-400 text-xs uppercase"},"Status",-1)),t("span",Ut,r(v.value.status||"â€”"),1)]),t("div",Dt,[e[34]||(e[34]=t("span",{class:"block text-gray-400 text-xs uppercase"},"Location",-1)),t("span",Pt,r(v.value.location||"â€”"),1)]),t("div",At,[e[35]||(e[35]=t("span",{class:"block text-gray-400 text-xs uppercase"},"Duration",-1)),t("span",Vt,r(v.value.start_date||"â€”")+" â†’ "+r(v.value.end_date||"â€”"),1)])]),t("div",Nt,[e[36]||(e[36]=t("div",{class:"mb-2 text-gray-700 font-semibold text-base"},"Description (EN)",-1)),t("p",Lt,r(v.value.description_en||"â€”"),1),e[37]||(e[37]=t("div",{class:"mb-2 text-gray-700 font-semibold text-base"},"Description (AR)",-1)),t("p",St,r(v.value.description_ar||"â€”"),1)]),t("div",null,[e[38]||(e[38]=t("div",{class:"text-gray-800 font-semibold mb-3"},"Gallery",-1)),v.value.gallery&&v.value.gallery.length?(o(),n("div",Et,[(o(!0),n(V,null,N(v.value.gallery,l=>(o(),n("div",{key:l.id,class:"aspect-[4/3] rounded-lg overflow-hidden bg-gray-100 border hover:shadow-md transition"},[t("img",{src:l.image_url,class:"w-full h-full object-cover"},null,8,$t)]))),128))])):(o(),n("div",Mt,"No images available."))]),t("div",Rt,[q(j(U),{href:re(v.value.id),class:"nav-btn"},{default:k(()=>e[39]||(e[39]=[h(" ðŸ“„ Docs ")])),_:1},8,["href"]),q(j(U),{href:ie(v.value.id),class:"nav-btn"},{default:k(()=>e[40]||(e[40]=[h(" ðŸ–¼ï¸ Gallery ")])),_:1},8,["href"]),q(j(U),{href:de(v.value.id),class:"nav-btn"},{default:k(()=>e[41]||(e[41]=[h(" âœï¸ Drawings ")])),_:1},8,["href"]),q(j(U),{href:ue(v.value.id),class:"nav-btn"},{default:k(()=>e[42]||(e[42]=[h(" ðŸ“Š Reports ")])),_:1},8,["href"]),q(j(U),{href:ce(v.value.id),class:"nav-btn"},{default:k(()=>e[43]||(e[43]=[h(" ðŸ§© Phases ")])),_:1},8,["href"]),q(j(U),{href:ve(v.value.id),class:"nav-btn"},{default:k(()=>e[44]||(e[44]=[h(" ðŸ•’ Timeline ")])),_:1},8,["href"]),q(j(U),{href:pe(v.value.id),class:"nav-btn"},{default:k(()=>e[45]||(e[45]=[h(" ðŸ‘· Assignments ")])),_:1},8,["href"]),q(j(U),{href:me(v.value.id),class:"nav-btn"},{default:k(()=>e[46]||(e[46]=[h(" ðŸ’° Payments & Installment ")])),_:1},8,["href"])]),t("div",{class:"sticky bottom-0 bg-white border-t pt-3 text-right"},[t("button",{onClick:H,class:"px-4 py-2 border rounded-lg hover:bg-gray-100 text-gray-700"}," Close ")])]))])])])):u("",!0),G.value?(o(),n("div",{key:1,class:"fixed inset-0 z-50",onKeydown:Ve(R,["esc"])},[t("div",{class:"absolute inset-0 bg-black/40 back-drop",onClick:R,"aria-hidden":"true"}),t("div",It,[t("div",Ot,[t("div",Ft,[t("div",Gt,[t("h3",Tt,r(c.value?"Edit Project":"Add Project"),1),t("button",{onClick:R,class:"text-gray-400 hover:text-gray-600","aria-label":"Close"},"âœ•")])]),t("div",zt,[t("form",{onSubmit:Ne(se,["prevent"]),class:"space-y-4"},[t("div",Bt,[t("div",null,[e[47]||(e[47]=t("label",{class:"block text-xs text-gray-500 mb-1"},"Name (EN)*",-1)),x(t("input",{class:_(b("name.en")),"onUpdate:modelValue":e[7]||(e[7]=l=>a.value.name.en=l),type:"text",required:!c.value},null,10,Yt),[[y,a.value.name.en]]),d("name.en")?(o(),n("p",Ht,r(d("name.en")),1)):u("",!0)]),t("div",null,[e[48]||(e[48]=t("label",{class:"block text-xs text-gray-500 mb-1"},"Name (AR)*",-1)),x(t("input",{class:_(b("name.ar")),"onUpdate:modelValue":e[8]||(e[8]=l=>a.value.name.ar=l),type:"text",required:!c.value},null,10,Kt),[[y,a.value.name.ar]]),d("name.ar")?(o(),n("p",Jt,r(d("name.ar")),1)):u("",!0)]),t("div",Qt,[e[49]||(e[49]=t("label",{class:"block text-xs text-gray-500 mb-1"},"Description (EN)*",-1)),x(t("textarea",{class:_(b("description.en")),"onUpdate:modelValue":e[9]||(e[9]=l=>a.value.description.en=l),required:!c.value},null,10,Wt),[[y,a.value.description.en]]),d("description.en")?(o(),n("p",Xt,r(d("description.en")),1)):u("",!0)]),t("div",Zt,[e[50]||(e[50]=t("label",{class:"block text-xs text-gray-500 mb-1"},"Description (AR)*",-1)),x(t("textarea",{class:_(b("description.ar")),"onUpdate:modelValue":e[10]||(e[10]=l=>a.value.description.ar=l),required:!c.value},null,10,es),[[y,a.value.description.ar]]),d("description.ar")?(o(),n("p",ts,r(d("description.ar")),1)):u("",!0)])]),t("div",ss,[t("div",ls,[q(Se,{label:"Pick on map",lat:a.value.lat,"onUpdate:lat":e[11]||(e[11]=l=>a.value.lat=l),lng:a.value.long,"onUpdate:lng":e[12]||(e[12]=l=>a.value.long=l),address:a.value.location,"onUpdate:address":e[13]||(e[13]=l=>a.value.location=l)},null,8,["lat","lng","address"])]),t("div",null,[e[51]||(e[51]=t("label",{class:"block text-xs text-gray-500 mb-1"},"Location*",-1)),x(t("input",{class:_(b("location")),"onUpdate:modelValue":e[14]||(e[14]=l=>a.value.location=l),type:"text",required:!c.value,disabled:""},null,10,as),[[y,a.value.location]]),d("location")?(o(),n("p",os,r(d("location")),1)):u("",!0)]),t("div",null,[e[52]||(e[52]=t("label",{class:"block text-xs text-gray-500 mb-1"},"Latitude (-90..90)*",-1)),x(t("input",{class:_(b("lat")),"onUpdate:modelValue":e[15]||(e[15]=l=>a.value.lat=l),type:"number",step:"any",min:"-90",max:"90",required:!c.value,disabled:""},null,10,ns),[[y,a.value.lat,void 0,{number:!0}]]),d("lat")?(o(),n("p",rs,r(d("lat")),1)):u("",!0)]),t("div",null,[e[53]||(e[53]=t("label",{class:"block text-xs text-gray-500 mb-1"},"Longitude (-180..180)*",-1)),x(t("input",{class:_(b("long")),"onUpdate:modelValue":e[16]||(e[16]=l=>a.value.long=l),type:"number",step:"any",min:"-180",max:"180",required:!c.value,disabled:""},null,10,is),[[y,a.value.long,void 0,{number:!0}]]),d("long")?(o(),n("p",ds,r(d("long")),1)):u("",!0)]),t("div",null,[e[54]||(e[54]=t("label",{class:"block text-xs text-gray-500 mb-1"},"Start Date*",-1)),x(t("input",{class:_(b("start_date")),"onUpdate:modelValue":e[17]||(e[17]=l=>a.value.start_date=l),type:"datetime-local",required:!c.value},null,10,us),[[y,a.value.start_date]]),d("start_date")?(o(),n("p",cs,r(d("start_date")),1)):u("",!0)]),t("div",null,[e[55]||(e[55]=t("label",{class:"block text-xs text-gray-500 mb-1"},"End Date*",-1)),x(t("input",{class:_(b("end_date")),"onUpdate:modelValue":e[18]||(e[18]=l=>a.value.end_date=l),type:"datetime-local",required:!c.value},null,10,vs),[[y,a.value.end_date]]),d("end_date")?(o(),n("p",ps,r(d("end_date")),1)):u("",!0)]),t("div",ms,[t("div",xs,[e[56]||(e[56]=t("label",{class:"block text-xs text-gray-500"}," Extension Dates (optional) ",-1)),t("button",{type:"button",class:"text-xs px-2 py-1 border rounded hover:bg-gray-50",onClick:e[19]||(e[19]=l=>a.value.extension_dates.push(""))}," + Add extension ")]),((i=a.value.extension_dates)==null?void 0:i.length)>0?(o(),n("div",gs,[(o(!0),n(V,null,N(a.value.extension_dates,(l,g)=>(o(),n("div",{key:g,class:"flex items-center gap-2"},[x(t("input",{class:"form-input",type:"datetime-local","onUpdate:modelValue":w=>a.value.extension_dates[g]=w,placeholder:"YYYY-MM-DDTHH:mm"},null,8,fs),[[y,a.value.extension_dates[g]]]),t("button",{type:"button",class:"px-2 py-2 border rounded text-red-600 hover:bg-red-50",onClick:w=>a.value.extension_dates.splice(g,1),title:"Remove"}," âœ• ",8,bs)]))),128))])):u("",!0),d("extension_dates")?(o(),n("p",ys,r(d("extension_dates")),1)):u("",!0)])]),t("div",_s,[t("div",null,[e[58]||(e[58]=t("label",{class:"block text-xs text-gray-500 mb-1"},"User *",-1)),x(t("select",{class:_(b("user_id")),"onUpdate:modelValue":e[20]||(e[20]=l=>a.value.user_id=l),required:!c.value},[e[57]||(e[57]=t("option",{value:"",disabled:""},"Select an Owner",-1)),(o(!0),n(V,null,N(X.value,l=>(o(),n("option",{key:l.id,value:l.id},r(l.name)+" â€” "+r(l.email),9,ws))),128))],10,hs),[[O,a.value.user_id,void 0,{number:!0}]]),d("user_id")?(o(),n("p",ks,r(d("user_id")),1)):u("",!0)]),t("div",null,[e[60]||(e[60]=t("label",{class:"block text-xs text-gray-500 mb-1"},"Project Manager *",-1)),x(t("select",{class:_(b("vendor_id")),"onUpdate:modelValue":e[21]||(e[21]=l=>a.value.vendor_id=l),required:!c.value},[e[59]||(e[59]=t("option",{value:"",disabled:""},"Select a Project Manager",-1)),(o(!0),n(V,null,N(Z.value,l=>(o(),n("option",{key:l.id,value:l.id},r(l.name)+" â€” "+r(l.email),9,Cs))),128))],10,qs),[[O,a.value.vendor_id,void 0,{number:!0}]]),d("vendor_id")?(o(),n("p",js,r(d("vendor_id")),1)):u("",!0)]),t("div",null,[e[62]||(e[62]=t("label",{class:"block text-xs text-gray-500 mb-1"},"Status",-1)),x(t("select",{class:"form-input","onUpdate:modelValue":e[22]||(e[22]=l=>a.value.status=l)},e[61]||(e[61]=[t("option",{value:"under_construction",selected:""},"under_construction",-1),t("option",{value:"completed"},"completed",-1)]),512),[[O,a.value.status]])])]),t("div",Us,[t("div",null,[t("label",Ds," Cover Image* "+r(c.value?"(optional to replace)":""),1),t("input",{class:_(b("cover_image")),type:"file",accept:"image/*",onChange:ye,required:!c.value},null,42,Ps),d("cover_image")?(o(),n("p",As,r(d("cover_image")),1)):u("",!0),A.value?(o(),n("div",Vs,[t("img",{src:A.value,class:"w-40 h-28 object-cover rounded border"},null,8,Ns),t("button",{type:"button",class:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center shadow hover:bg-red-600",onClick:he}," âœ• ")])):u("",!0)]),t("div",null,[e[63]||(e[63]=t("label",{class:"block text-xs text-gray-500 mb-1"},"Gallery* (multiple on create)",-1)),t("input",{class:_(b("gallery")),type:"file",accept:"image/*",multiple:"",onChange:_e,required:!c.value},null,42,Ls),d("gallery")?(o(),n("p",Ss,r(d("gallery")),1)):u("",!0),E.value.length?(o(),n("div",Es,[(o(!0),n(V,null,N(E.value,l=>(o(),n("div",{key:l.id,class:"relative inline-block"},[t("img",{src:l.image_url,class:"w-24 h-16 object-cover rounded border"},null,8,$s),t("button",{type:"button",class:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center shadow hover:bg-red-600",onClick:g=>we(l.id)}," âœ• ",8,Ms)]))),128))])):u("",!0),M.value.length?(o(),n("div",Rs,[(o(!0),n(V,null,N(M.value,(l,g)=>(o(),n("div",{key:g,class:"relative inline-block"},[t("img",{src:l,class:"w-24 h-16 object-cover rounded border"},null,8,Is),t("button",{type:"button",class:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center shadow hover:bg-red-600",onClick:w=>M.value.splice(g,1)}," âœ• ",8,Os)]))),128))])):u("",!0)])]),P.value?(o(),n("div",Fs,r(P.value),1)):u("",!0)],32)]),t("div",Gs,[t("div",Ts,[t("button",{disabled:T.value,class:"px-4 py-2 bg-green-600 text-white rounded disabled:opacity-60",onClick:se},r(T.value?"Savingâ€¦":c.value?"Update":"Create"),9,zs),t("button",{type:"button",class:"px-3 py-2 border rounded",onClick:R},"Cancel")])])])])],32)):u("",!0)])]}),_:1}))}},el=Ie(Bs,[["__scopeId","data-v-ac0be004"]]);export{el as default};
