import{m as s}from"./app-BzxX0dK2.js";function U(e){try{return typeof e=="string"?JSON.parse(e):e}catch{return e}}function x(e){const n=U(e);return n&&typeof n=="object"?{en:n.en??"",ar:n.ar??""}:{en:n??"",ar:n??""}}function h(e){var n;return Array.isArray(e)?e:Array.isArray(e==null?void 0:e.data)?e.data:Array.isArray(e==null?void 0:e.message)?e.message:Array.isArray((n=e==null?void 0:e.data)==null?void 0:n.data)?e.data.data:[]}function b(e){return(e==null?void 0:e.data)??(e==null?void 0:e.message)??e}function $(e){return e?`/storage/${e}`:""}function S(e){return e?String(e).replace(" ","T").slice(0,16):""}function w(e={}){const n=x(e.name),a=x(e.description),o=Array.isArray(e.home_unit_gallery)?e.home_unit_gallery.map(d=>({id:d.id??void 0,image:d.image,image_url:$(d.image)})):Array.isArray(e.gallery)?e.gallery.map(d=>({id:d.id??void 0,image:d.image,image_url:$(d.image)})):[];return{...e,name_en:n.en,name_ar:n.ar,description_en:a.en,description_ar:a.ar,location:e.location??"",lat:e.lat??null,long:e.long??null,start_date:S(e.start_date),end_date:S(e.end_date),extension_dates:Array.isArray(e.extension_dates)?e.extension_dates.map(S):[],status:e.status??"",user_id:e.user_id??null,vendor_id:e.vendor_id??null,cover_image_url:$(e.cover_image),gallery:o}}const v={list:async(e={})=>{const{data:n}=await s.get("/api/units",{params:e});return h(n).map(w)},listByUser:async(e,n={})=>{const{data:a}=await s.get(`/api/units/user/${e}`,{params:n});return h(a).map(w)},listByVendor:async(e,n={})=>{const{data:a}=await s.get(`/api/units/vendor/${e}`,{params:n});return h(a).map(w)},show:async e=>{const{data:n}=await s.get(`/api/units/show/${e}`);return w(b(n))},create:async e=>{const{data:n}=await s.post("/api/units/create",e,{headers:{"Content-Type":"multipart/form-data"}});return n},update:async(e,n)=>{const{data:a}=await s.post(`/api/units/update/${e}`,n,{headers:{"Content-Type":"multipart/form-data"}});return a},remove:async e=>{const{data:n}=await s.delete(`/api/units/delete/${e}`);return n},deleteCover:async e=>{const{data:n}=await s.delete(`/api/units/${e}/cover`);return n},deleteGalleryImage:async(e,n)=>{const{data:a}=await s.delete(`/api/units/${e}/gallery/${n}`);return a}};function C({name:e={en:"",ar:""},description:n={en:"",ar:""},location:a,lat:o,long:d,start_date:_,end_date:l,cover_image:c,gallery:u=[],user_id:A,vendor_id:f,status:g,extension_dates:y=[],...m}){const r=new FormData;return r.append("name[en]",e.en??""),r.append("name[ar]",e.ar??""),r.append("description[en]",n.en??""),r.append("description[ar]",n.ar??""),r.append("location",a??""),r.append("lat",String(o??"")),r.append("long",String(d??"")),r.append("start_date",_??""),r.append("end_date",l??""),(y||[]).filter(t=>t).forEach((t,i)=>{r.append(`extension_dates[${i}]`,t)}),c&&r.append("cover_image",c),(u||[]).forEach((t,i)=>{t&&r.append(`gallery[${i}]`,t)}),r.append("user_id",String(A??"")),r.append("vendor_id",String(f??"")),g&&r.append("status",g),Object.entries(m).forEach(([t,i])=>{i!=null&&i!==""&&r.append(t,i)}),r}function D(e={}){const{name:n,description:a,location:o,lat:d,long:_,start_date:l,end_date:c,extension_dates:u,cover_image:A,gallery:f,user_id:g,vendor_id:y,status:m,...r}=e,t=new FormData;return n&&(n.en!==void 0&&t.append("name[en]",n.en??""),n.ar!==void 0&&t.append("name[ar]",n.ar??"")),a&&(a.en!==void 0&&t.append("description[en]",a.en??""),a.ar!==void 0&&t.append("description[ar]",a.ar??"")),o!==void 0&&t.append("location",o??""),d!==void 0&&t.append("lat",String(d??"")),_!==void 0&&t.append("long",String(_??"")),l!==void 0&&t.append("start_date",l??""),c!==void 0&&t.append("end_date",c??""),u!==void 0&&(Array.isArray(u)?u.filter(i=>i).forEach((i,p)=>t.append(`extension_dates[${p}]`,i)):t.append("extension_dates[0]",String(u))),A&&t.append("cover_image",A),Array.isArray(f)&&f.length&&f.forEach((i,p)=>{i&&t.append(`gallery[${p}]`,i)}),g!==void 0&&t.append("user_id",String(g??"")),y!==void 0&&t.append("vendor_id",String(y??"")),m!==void 0&&m!==""&&t.append("status",m),Object.entries(r).forEach(([i,p])=>{p!=null&&p!==""&&t.append(i,p)}),t}export{v as U,C as a,D as b};
