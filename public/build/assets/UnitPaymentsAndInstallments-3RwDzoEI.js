import{p,B as st,c as j,o as i,b as t,a as v,t as c,w as W,u as y,N as X,m as V,q as lt,f as m,h,F as Y,s as Z,e as E,n as L,T as mt,d as ct,j as A,k as q,y as z}from"./app-BWauP3u0.js";import{_ as pt}from"./AuthenticatedLayout-WKccn0yZ.js";import{_ as bt}from"./UnitNav-BxilJsuD.js";import{U as B,b as vt,a as xt}from"./unitPayments-e0it8Vt1.js";import{b as yt,U as O,a as gt}from"./unitInstallments-Dl9jVPjR.js";import{c as K,d as M,a as et,F as C,E as T,e as ft}from"./index.esm-D_6L6z_y.js";import{_ as at}from"./_plugin-vue_export-helper-DlAUqK2U.js";const _t={class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50"},wt={class:"bg-white rounded-xl shadow-xl w-full max-w-3xl p-6 relative animate-fadeIn"},kt={class:"text-xl font-semibold mb-4"},ht={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},$t={class:"md:col-span-2"},It={class:"md:col-span-2"},Ct={class:"flex justify-end mt-6 gap-3"},Pt=["disabled"],At={__name:"InstallmentModal",props:{mode:String,data:Object,paymentId:[String,Number]},emits:["close","saved"],setup(b,{emit:r}){var N,D,I,S,w,k,d,g;const n=b,s=r,x=p(!1),f=K({title:K({en:M().required("Title (EN) is required"),ar:M().required("Title (AR) is required")}),description:K({en:M().nullable(),ar:M().nullable()}),amount:et().typeError("Amount must be a number").required("Amount is required").min(0,"Amount must be >= 0"),percentage:et().nullable().min(0,"Min 0").max(100,"Max 100").typeError("Percentage must be a number"),milestone_date:M().nullable(),submission_date:M().nullable(),consultant_approval_date:M().nullable(),due_date:M().nullable()});function _(l,a){if(!l)return a;if(typeof l=="string")try{return JSON.parse(l)}catch{return a}return l}const $=p({title:_((N=n.data)==null?void 0:N.title,{en:"",ar:""}),description:_((D=n.data)==null?void 0:D.description,{en:"",ar:""}),amount:((I=n.data)==null?void 0:I.amount)??"",percentage:((S=n.data)==null?void 0:S.percentage)??"",milestone_date:((w=n.data)==null?void 0:w.milestone_date)??"",submission_date:((k=n.data)==null?void 0:k.submission_date)??"",consultant_approval_date:((d=n.data)==null?void 0:d.consultant_approval_date)??"",due_date:((g=n.data)==null?void 0:g.due_date)??""});st(()=>n.data,l=>{l&&($.value={title:_(l.title,{en:"",ar:""}),description:_(l.description,{en:"",ar:""}),amount:l.amount??"",percentage:l.percentage??"",milestone_date:l.milestone_date??"",submission_date:l.submission_date??"",consultant_approval_date:l.consultant_approval_date??"",due_date:l.due_date??"",status:l.status??"pending"})},{immediate:!0});async function P(l){x.value=!0;try{if(n.mode==="add"){const a=yt(n.paymentId,l);await O.create(a)}else{const a=gt(l);await O.update(n.data.id,a)}s("saved"),s("close")}catch(a){console.error(a),alert("Failed to save installment")}finally{x.value=!1}}return(l,a)=>(i(),j(X,{to:"body"},[t("div",_t,[t("div",wt,[t("button",{onClick:a[0]||(a[0]=U=>l.$emit("close")),class:"absolute top-3 right-4 text-gray-500 hover:text-black"}," ✕ "),t("h3",kt,c(b.mode==="add"?"Add Installment":"Edit Installment"),1),v(y(ft),{onSubmit:P,"initial-values":$.value,"validation-schema":y(f)},{default:W(()=>[t("div",ht,[t("div",null,[a[2]||(a[2]=t("label",{class:"block text-xs text-gray-500 mb-1"},"Title (EN) *",-1)),v(y(C),{name:"title.en",as:"input",class:"form-input"}),v(y(T),{name:"title.en",class:"text-red-600 text-xs mt-1"})]),t("div",null,[a[3]||(a[3]=t("label",{class:"block text-xs text-gray-500 mb-1"},"Title (AR) *",-1)),v(y(C),{name:"title.ar",as:"input",class:"form-input",dir:"rtl"}),v(y(T),{name:"title.ar",class:"text-red-600 text-xs mt-1"})]),t("div",$t,[a[4]||(a[4]=t("label",{class:"block text-xs text-gray-500 mb-1"},"Description (EN)",-1)),v(y(C),{name:"description.en",as:"textarea",rows:"2",class:"form-input"}),v(y(T),{name:"description.en",class:"text-red-600 text-xs mt-1"})]),t("div",It,[a[5]||(a[5]=t("label",{class:"block text-xs text-gray-500 mb-1"},"Description (AR)",-1)),v(y(C),{name:"description.ar",as:"textarea",rows:"2",class:"form-input",dir:"rtl"}),v(y(T),{name:"description.ar",class:"text-red-600 text-xs mt-1"})]),t("div",null,[a[6]||(a[6]=t("label",{class:"block text-xs text-gray-500 mb-1"},"Amount *",-1)),v(y(C),{name:"amount",as:"input",type:"number",class:"form-input"}),v(y(T),{name:"amount",class:"text-red-600 text-xs mt-1"})]),t("div",null,[a[7]||(a[7]=t("label",{class:"block text-xs text-gray-500 mb-1"},"Percentage",-1)),v(y(C),{name:"percentage",as:"input",type:"number",class:"form-input"}),v(y(T),{name:"percentage",class:"text-red-600 text-xs mt-1"})]),t("div",null,[a[8]||(a[8]=t("label",{class:"block text-xs text-gray-500 mb-1"},"Milestone Date",-1)),v(y(C),{name:"milestone_date",as:"input",type:"date",class:"form-input"})]),t("div",null,[a[9]||(a[9]=t("label",{class:"block text-xs text-gray-500 mb-1"},"Submission Date",-1)),v(y(C),{name:"submission_date",as:"input",type:"date",class:"form-input"})]),t("div",null,[a[10]||(a[10]=t("label",{class:"block text-xs text-gray-500 mb-1"},"Consultant Approval Date",-1)),v(y(C),{name:"consultant_approval_date",as:"input",type:"date",class:"form-input"})]),t("div",null,[a[11]||(a[11]=t("label",{class:"block text-xs text-gray-500 mb-1"},"Due Date",-1)),v(y(C),{name:"due_date",as:"input",type:"date",class:"form-input"})])]),t("div",Ct,[t("button",{class:"px-4 py-2 border rounded hover:bg-gray-100",onClick:a[1]||(a[1]=U=>l.$emit("close")),type:"button"}," Cancel "),t("button",{class:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",type:"submit",disabled:x.value},c(x.value?"Saving…":"Save"),9,Pt)])]),_:1},8,["initial-values","validation-schema"])])])]))}},Mt=at(At,[["__scopeId","data-v-d8053d38"]]),Q={list:async b=>{const{data:r}=await V.get(`/api/unit-payments/installments/${b}/invoices`);return Array.isArray(r)?r:(r==null?void 0:r.data)??[]},updateStatus:async(b,r)=>{const{data:n}=await V.post(`/api/unit-payments/installments/${b}/status`,{status:r});return n},confirmInvoice:async(b,r)=>{const{data:n}=await V.post("/api/unit-payments/invoices/confirm",{invoice_id:b,action:r});return n}},Nt={class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50"},Dt={class:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl p-6 relative animate-fadeIn max-h-[90vh] overflow-y-auto"},St={key:0,class:"text-sm text-gray-500"},Ut={key:1},jt={class:"flex justify-between items-start"},Tt={class:"font-semibold text-gray-800"},Et={class:"text-blue-600"},Vt={class:"mt-2"},Lt={class:"mt-3"},Ft=["src","onClick"],qt={class:"flex flex-col gap-2"},zt=["onClick","disabled"],Bt=["onClick","disabled"],Ot={key:0,class:"text-center text-gray-500 text-sm mt-6"},Rt={class:"bg-white rounded-xl shadow-2xl p-4 w-full max-w-lg"},Gt=["src"],Jt={__name:"InvoiceModal",props:{installment:Object},emits:["close"],setup(b,{emit:r}){const n=b,s=p([]),x=p(!1),f=p(""),_=p(""),$=p(!1),P=p(null);lt(async()=>{x.value=!0,s.value=await Q.list(n.installment.id),x.value=!1});async function N(w,k){var d,g;if(f.value="",_.value="",!!confirm(`Mark invoice #${w.id} as ${k}?`))try{const l=await Q.confirmInvoice(w.id,k);(l==null?void 0:l.status)==="error"?(_.value="error",f.value=l.message||"Action failed."):(l==null?void 0:l.status)==="success"&&(_.value="success",f.value=l.message||"Action successful."),s.value=await Q.list(n.installment.id),setTimeout(()=>f.value="",4e3)}catch(l){_.value="error",f.value=((g=(d=l.response)==null?void 0:d.data)==null?void 0:g.message)||"Something went wrong.",setTimeout(()=>f.value="",4e3)}}function D(w){return w?`/storage/${w}`:""}function I(w){P.value=w,$.value=!0}function S(){P.value=null,$.value=!1}return(w,k)=>(i(),j(X,{to:"body"},[t("div",Nt,[t("div",Dt,[t("button",{onClick:k[0]||(k[0]=d=>w.$emit("close")),class:"absolute top-3 right-4 text-gray-400 hover:text-gray-700 text-xl"}," ✕ "),k[2]||(k[2]=t("h3",{class:"text-2xl font-semibold text-gray-800 mb-6 border-b pb-2"}," Invoices ",-1)),x.value?(i(),m("div",St,"Loading...")):(i(),m("div",Ut,[(i(!0),m(Y,null,Z(s.value,d=>(i(),m("div",{key:d.id,class:"p-4 mb-3 border rounded-xl hover:shadow transition bg-gray-50"},[t("div",jt,[t("div",null,[t("p",Tt,[E(" Invoice #"+c(d.id)+" — ",1),t("span",Et,c(d.paid_amount)+" EGP",1)]),t("div",Vt,[t("span",{class:L(["inline-block px-3 py-1 text-xs rounded-full font-medium border",d.status==="confirmed"?"bg-green-100 text-green-700 border-green-200":d.status==="rejected"?"bg-red-100 text-red-700 border-red-200":"bg-yellow-100 text-yellow-700 border-yellow-200"])},c(d.status?d.status.toUpperCase():"PENDING"),3)]),t("div",Lt,[t("img",{src:D(d.invoice_file),alt:"Invoice File",class:"rounded-lg shadow-sm border object-contain max-h-40 cursor-pointer hover:scale-105 transition",onClick:g=>I(d.invoice_file)},null,8,Ft)])]),t("div",qt,[t("button",{onClick:g=>N(d,"confirm"),class:L(["px-4 py-1.5 rounded-lg text-sm font-medium text-white transition",d.status==="confirmed"?"bg-green-300 cursor-not-allowed":"bg-green-600 hover:bg-green-700"]),disabled:d.status==="confirmed"},c(d.status==="confirmed"?"Approved":"Approve"),11,zt),t("button",{onClick:g=>N(d,"reject"),class:"px-4 py-1.5 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-700 transition",disabled:d.status==="rejected"},c(d.status==="rejected"?"Rejected":"Reject"),9,Bt)])])]))),128)),s.value.length?h("",!0):(i(),m("div",Ot," No invoices found. "))])),v(mt,{name:"fade"},{default:W(()=>[f.value?(i(),m("div",{key:0,class:L(["mt-5 p-3 rounded-lg text-sm font-medium border text-center",_.value==="error"?"bg-red-50 text-red-700 border-red-200":"bg-green-50 text-green-700 border-green-200"])},c(f.value),3)):h("",!0)]),_:1}),$.value?(i(),m("div",{key:2,class:"fixed inset-0 bg-black/60 flex items-center justify-center z-[100]",onClick:ct(S,["self"])},[t("div",Rt,[t("div",{class:"flex justify-between items-center mb-2"},[k[1]||(k[1]=t("h4",{class:"font-semibold text-gray-700 text-lg"},"Invoice Preview",-1)),t("button",{onClick:S,class:"text-gray-500 hover:text-gray-700 text-xl"}," ✕ ")]),t("img",{src:D(P.value),alt:"Invoice",class:"rounded-lg object-contain max-h-[75vh] w-full"},null,8,Gt)])])):h("",!0)])])]))}},Ht=at(Jt,[["__scopeId","data-v-48c1c86b"]]),Kt={class:"fixed inset-0 bg-black/40 flex items-center justify-center z-50"},Qt={class:"bg-white w-full max-w-2xl rounded-lg p-6 relative shadow-xl animate-fadeIn"},Wt={key:0,class:"text-center text-gray-500 py-8"},Xt={key:1,class:"divide-y divide-gray-200 max-h-96 overflow-y-auto"},Yt={class:"flex justify-between items-center"},Zt={class:"font-medium text-gray-800"},te={class:"text-sm text-gray-600 mt-1"},ee={class:"text-sm text-gray-500"},se={class:"text-xs text-gray-400"},le={key:0,class:"text-sm text-gray-600 mt-1"},ae={__name:"PaymentLogsModal",props:{logs:{type:Array,default:()=>[]}},setup(b){return(r,n)=>(i(),j(X,{to:"body"},[t("div",Kt,[t("div",Qt,[t("button",{onClick:n[0]||(n[0]=s=>r.$emit("close")),class:"absolute right-4 top-3 text-gray-500 hover:text-black"},"✕"),n[1]||(n[1]=t("h3",{class:"text-lg font-semibold mb-4 text-gray-800"},"Payment Logs",-1)),b.logs.length?(i(),m("ul",Xt,[(i(!0),m(Y,null,Z(b.logs,s=>(i(),m("li",{key:s.id,class:"py-3"},[t("div",Yt,[t("div",null,[t("p",Zt,c(s.action||"Action"),1),t("p",te,c(s.description||"Description"),1),t("p",ee,"By: "+c(s.created_by_name||"System Admin"),1)]),t("span",se,c(new Date(s.created_at).toLocaleString()),1)]),s.notes?(i(),m("p",le,c(s.notes),1)):h("",!0)]))),128))])):(i(),m("div",Wt,"No logs found."))])])]))}},ne={unitLogs:async b=>{const{data:r}=await V.get(`/api/unit-payments/logs/${b}`);return(r==null?void 0:r.data)??[]},installmentLogs:async b=>{const{data:r}=await V.get(`/api/unit-payments/installment/${b}/logs`);return(r==null?void 0:r.data)??[]}},oe={class:"container mx-auto p-6"},ie={class:"flex border-b mb-6 mt-6 items-center"},re={key:0,class:"p-6 rounded shadow mt-6"},de={key:0,class:"text-sm text-gray-500"},ue={key:1,class:"text-center text-gray-500 py-6"},me={key:2,class:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"},ce={key:1,class:"bg-white p-6 rounded shadow mt-6"},pe={key:0},be={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},ve={class:"mt-4 text-right"},xe=["disabled"],ye={key:1,class:"space-y-6"},ge={class:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"},fe={class:"flex justify-end gap-2"},_e={key:2,class:"space-y-4"},we={class:"flex justify-between items-center mb-4"},ke=["disabled"],he={key:0,class:"bg-white rounded-xl shadow-sm p-4"},$e={class:"min-w-full text-sm text-left border"},Ie={class:"p-2 border"},Ce={class:"p-2 border"},Pe={class:"p-2 border"},Ae={class:"p-2 border"},Me={class:"p-2 border"},Ne={class:"p-2 border"},De={class:"p-2 border text-center"},Se=["onClick"],Ue={class:"p-2 border flex gap-2"},je=["onClick"],Te=["onClick"],Ee=["onClick"],Ve={key:0,class:"text-center py-4 text-gray-500"},Ge={__name:"UnitPaymentsAndInstallments",props:{unitId:Number},setup(b){const r=b,n=p("payments"),s=p(null),x=p({total_price:"",installments_count:"",payment_type:"installments",overall_status:"pending"}),f=p(!1),_=p(!1),$=p(!1),P=p([]);function N(u){s.value={...u,editable:{...u}}}async function D(u){g.value=u,$.value=!0;try{const e=await ne.installmentLogs(u);P.value=e}catch{P.value=[],console.log("No logs found")}}async function I(){var u;_.value=!0;try{const e=await B.list(r.unitId);if(((u=e==null?void 0:e.data)==null?void 0:u.length)>0||(e==null?void 0:e.length)>0){const o=e.data?e.data[0]:e[0];N(o),g.value=o.id}else s.value=null,g.value=null;n.value==="installments"&&await U()}finally{_.value=!1}}async function S(){f.value=!0;const u=vt(r.unitId,[x.value]);await B.create(u),await I(),f.value=!1}async function w(){if(!s.value)return;const u=xt(s.value.editable);await B.update(s.value.id,u),await I()}async function k(u){confirm("Delete this payment?")&&(await B.remove(u),await I())}function d(u){const e=Number(u);return isNaN(e)?"0.00":e.toFixed(2)}const g=p(null),l=p([]),a=p(!1);async function U(){if(g.value){a.value=!0;try{l.value=await O.list(g.value)}finally{a.value=!1}}}async function nt(u){confirm("Delete this installment?")&&(await O.remove(u),await I(),await U())}const F=p(!1),R=p("add"),G=p(null);function ot(){R.value="add",G.value=null,F.value=!0}function it(u){R.value="edit",G.value=u,F.value=!0}function rt(){F.value=!1}const J=p(!1),tt=p(null);function dt(u){tt.value=u,J.value=!0}function ut(){J.value=!1}return lt(I),st(n,async u=>{u==="installments"&&g.value&&await U()}),(u,e)=>(i(),j(pt,null,{default:W(()=>[t("div",oe,[v(bt,{"unit-id":Number(b.unitId),cols:2},null,8,["unit-id"]),t("div",ie,[t("button",{class:L([n.value==="payments"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600","px-4 py-2 font-medium"]),onClick:e[0]||(e[0]=o=>n.value="payments")}," Payments ",2),t("button",{class:L([n.value==="installments"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600","px-4 py-2 font-medium"]),onClick:e[1]||(e[1]=o=>n.value="installments")}," Installments ",2)]),n.value==="payments"?(i(),m("div",re,[e[16]||(e[16]=t("div",{class:"flex justify-between items-center mb-4"},[t("h3",{class:"text-lg font-semibold text-gray-800"},"Payment")],-1)),e[17]||(e[17]=t("h3",{class:"text-lg font-semibold mb-3"},"Current Payment",-1)),_.value?(i(),m("div",de,"Loading…")):s.value?(i(),m("div",me,[t("div",null,[e[12]||(e[12]=t("strong",null,"Total Price:",-1)),E(" "+c(d(s.value.total_price)),1)]),t("div",null,[e[13]||(e[13]=t("strong",null,"Installments:",-1)),E(" "+c(s.value.installments_count),1)]),t("div",null,[e[14]||(e[14]=t("strong",null,"Type:",-1)),E(" "+c(s.value.payment_type),1)]),t("div",null,[e[15]||(e[15]=t("strong",null,"Status:",-1)),E(" "+c(s.value.overall_status),1)])])):(i(),m("div",ue," No payment created yet. "))])):h("",!0),n.value==="payments"?(i(),m("div",ce,[e[31]||(e[31]=t("h3",{class:"text-lg font-semibold mb-4"},"Unit Payment",-1)),s.value?(i(),m("div",ye,[t("div",ge,[t("div",null,[e[25]||(e[25]=t("label",{class:"block text-gray-600 text-xs mb-1"},"Total Price",-1)),A(t("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>s.value.editable.total_price=o),type:"number",class:"w-full border p-2 rounded"},null,512),[[q,s.value.editable.total_price,void 0,{number:!0}]])]),t("div",null,[e[26]||(e[26]=t("label",{class:"block text-gray-600 text-xs mb-1"},"Installments Count",-1)),A(t("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>s.value.editable.installments_count=o),type:"number",class:"w-full border p-2 rounded"},null,512),[[q,s.value.editable.installments_count,void 0,{number:!0}]])]),t("div",null,[e[28]||(e[28]=t("label",{class:"block text-gray-600 text-xs mb-1"},"Type",-1)),A(t("select",{"onUpdate:modelValue":e[8]||(e[8]=o=>s.value.editable.payment_type=o),class:"w-full border p-2 rounded"},e[27]||(e[27]=[t("option",{value:"installments"},"Installments",-1),t("option",{value:"cash"},"Cash",-1)]),512),[[z,s.value.editable.payment_type]])]),t("div",null,[e[30]||(e[30]=t("label",{class:"block text-gray-600 text-xs mb-1"},"Status",-1)),A(t("select",{"onUpdate:modelValue":e[9]||(e[9]=o=>s.value.editable.overall_status=o),class:"w-full border p-2 rounded"},e[29]||(e[29]=[t("option",{value:"pending"},"Pending",-1),t("option",{value:"in_progress"},"In Progress",-1),t("option",{value:"completed"},"Completed",-1),t("option",{value:"overdue"},"Overdue",-1)]),512),[[z,s.value.editable.overall_status]])])]),t("div",fe,[t("button",{onClick:w,class:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded"}," Save Changes "),t("button",{onClick:e[10]||(e[10]=o=>k(s.value.id)),class:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded"}," Delete ")])])):(i(),m("div",pe,[e[24]||(e[24]=t("p",{class:"text-gray-600 mb-4"},"No payment created yet for this unit.",-1)),t("div",be,[t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium mb-1"},"Total Price *",-1)),A(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>x.value.total_price=o),type:"number",class:"form-control w-full border p-2 rounded"},null,512),[[q,x.value.total_price,void 0,{number:!0}]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium mb-1"},"Installments Count *",-1)),A(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>x.value.installments_count=o),type:"number",class:"form-control w-full border p-2 rounded"},null,512),[[q,x.value.installments_count,void 0,{number:!0}]])]),t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium mb-1"},"Payment Type *",-1)),A(t("select",{"onUpdate:modelValue":e[4]||(e[4]=o=>x.value.payment_type=o),class:"form-control w-full border p-2 rounded"},e[20]||(e[20]=[t("option",{value:"installments"},"Installments",-1),t("option",{value:"cash"},"Cash",-1)]),512),[[z,x.value.payment_type]])]),t("div",null,[e[23]||(e[23]=t("label",{class:"block text-sm font-medium mb-1"},"Overall Status *",-1)),A(t("select",{"onUpdate:modelValue":e[5]||(e[5]=o=>x.value.overall_status=o),class:"form-control w-full border p-2 rounded"},e[22]||(e[22]=[t("option",{value:"pending"},"Pending",-1),t("option",{value:"in_progress"},"In Progress",-1),t("option",{value:"completed"},"Completed",-1),t("option",{value:"overdue"},"Overdue",-1)]),512),[[z,x.value.overall_status]])])]),t("div",ve,[t("button",{onClick:S,disabled:f.value,class:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded disabled:opacity-50"},c(f.value?"Saving…":"Create Payment"),9,xe)])]))])):h("",!0),n.value==="installments"?(i(),m("div",_e,[t("div",we,[e[32]||(e[32]=t("h3",{class:"text-lg font-semibold text-gray-800"},"Installments",-1)),t("button",{disabled:!s.value,onClick:ot,class:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50"}," + Add Installment ",8,ke)]),g.value?(i(),m("div",he,[t("div",{class:"flex justify-between items-center mb-3"},[e[33]||(e[33]=t("h3",{class:"font-semibold text-lg text-gray-800"},"Installments",-1)),t("button",{onClick:U,class:"px-3 py-1 text-sm border rounded-lg hover:bg-gray-50"}," Refresh ")]),t("table",$e,[e[35]||(e[35]=t("thead",{class:"bg-gray-50 text-gray-700 uppercase text-xs"},[t("tr",null,[t("th",{class:"p-2 border"}),t("th",{class:"p-2 border"},"Title"),t("th",{class:"p-2 border"},"Amount"),t("th",{class:"p-2 border"},"Percentage"),t("th",{class:"p-2 border"},"Status"),t("th",{class:"p-2 border"},"Due Date"),t("th",{class:"p-2 border"},"Invoices"),t("th",{class:"p-2 border"},"Actions")])],-1)),t("tbody",null,[(i(!0),m(Y,null,Z(l.value,o=>(i(),m("tr",{key:o.id,class:"hover:bg-gray-50 transition"},[t("td",Ie,c(o.id),1),t("td",Ce,c(o.title.en),1),t("td",Pe,c(o.amount),1),t("td",Ae,c(o.percentage),1),t("td",Me,c(o.status),1),t("td",Ne,c(o.due_date||"-"),1),t("td",De,[t("button",{onClick:H=>dt(o),class:"text-blue-600 underline text-xs hover:text-blue-800"}," View ",8,Se)]),t("td",Ue,[t("button",{onClick:H=>it(o),class:"px-2 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700"}," Edit ",8,je),t("button",{onClick:H=>nt(o.id),class:"px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700"}," Delete ",8,Te),t("button",{onClick:H=>D(o.id),class:"px-3 py-1 text-xs border rounded text-gray-700 border-gray-200 hover:bg-gray-50 flex items-center gap-1"},e[34]||(e[34]=[t("i",{class:"fa fa-clock text-blue-500"},null,-1),E(" Logs ")]),8,Ee)])]))),128))])]),l.value.length?h("",!0):(i(),m("div",Ve," No installments found. "))])):h("",!0)])):h("",!0)]),F.value?(i(),j(Mt,{key:0,mode:R.value,data:G.value,paymentId:g.value,onClose:rt,onSaved:U},null,8,["mode","data","paymentId"])):h("",!0),J.value?(i(),j(Ht,{key:1,installment:tt.value,onClose:ut},null,8,["installment"])):h("",!0),$.value?(i(),j(ae,{key:2,logs:P.value,onClose:e[11]||(e[11]=o=>$.value=!1)},null,8,["logs"])):h("",!0)]),_:1}))}};export{Ge as default};
