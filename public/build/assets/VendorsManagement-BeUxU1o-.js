<<<<<<<< HEAD:public/build/assets/VendorsManagement-BeUxU1o-.js
import{p as d,i as N,q as T,f as c,o as i,a as o,u as l,g as Y,w as x,b as e,j as G,c as A,k as H,h as P,F as B,s as J,t as r,n as Q,O as W}from"./app-T0LQ4Oxa.js";import{_ as X}from"./AuthenticatedLayout-BxpqaVNf.js";import{c as Z,a as ee,g as te,b as h,F as ae,d as _,E as v}from"./index.esm-BOvK6yvX.js";import{V as M,b as se,a as le}from"./vendors-N9CwTCNc.js";import{_ as oe}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ne={class:"p-6 space-y-6"},re={class:"bg-white rounded-xl shadow border overflow-hidden"},ie={class:"w-full text-sm"},de={class:"px-4 py-3"},ue={class:"px-4 py-3"},ce=["src"],pe={key:1,class:"text-gray-400"},me={class:"px-4 py-3"},_e={class:"px-4 py-3"},ve={class:"px-4 py-3"},ge={class:"px-4 py-3"},fe={class:"px-4 py-3 text-right space-x-2"},he=["onClick"],ye=["onClick"],be={key:0},xe={class:"flex justify-between"},we={class:"text-sm"},ke={class:"text-sm text-gray-500"},Ce={class:"space-x-2"},Pe=["disabled"],Me=["disabled"],Ee={key:0,class:"fixed inset-0 bg-black/40 z-[9999] flex items-center justify-center"},Ve={class:"bg-white w-full max-w-2xl rounded-xl p-6 relative"},Fe={class:"text-lg font-bold mb-4"},$e={key:0,class:"mb-3 p-3 bg-red-50 text-red-700 rounded text-sm"},qe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},je={class:"md:col-span-2"},Ne={class:"grid grid-cols-[100px_1fr] gap-2"},Se={class:"flex items-center gap-2"},De={class:"md:col-span-2"},Le=["onChange"],Ae=["src"],E=10,Be={__name:"VendorsManagement",setup(Re){const S=d([]),V=d(""),p=d(1),w=d(!1),g=d(null),k=d(null),y=d(null),m=d(""),F=d(0),$=d({}),R=Z({name:h().required(),email:h().email().required(),country_code:h().required(),phone:h().required(),gender:h().required(),country_name:h().required(),password:h().min(8).nullable(),is_enabled:te(),profile_image:ee().nullable().test("required","Please select profile image",function(s){return g.value?!0:s instanceof File})});async function q(){S.value=await M.list()}const C=N(()=>{const s=V.value.toLowerCase();return S.value.filter(t=>{var a,n,f;return((a=t.name)==null?void 0:a.toLowerCase().includes(s))||((n=t.email)==null?void 0:n.toLowerCase().includes(s))||((f=t.phone)==null?void 0:f.includes(s))})}),D=N(()=>Math.ceil(C.value.length/E)),L=N(()=>C.value.slice((p.value-1)*E,p.value*E));function U(){g.value=null,m.value="",$.value={name:"",email:"",phone:"",country_code:"",gender:"",country_name:"",is_enabled:!0,password:"",profile_image:null},k.value=null,y.value=null,F.value++,w.value=!0}function I(s){g.value=s.id,m.value="",$.value={name:s.name,email:s.email,phone:s.phone,country_code:s.country_code,gender:s.gender,country_name:s.country_name,is_enabled:!!s.is_enabled,password:"",profile_image:null},y.value=s.profile_image_url||null,F.value++,w.value=!0}function j(){w.value=!1}function K(s,t){var n;const a=((n=s.target.files)==null?void 0:n[0])||null;k.value=a,y.value=a?URL.createObjectURL(a):null,t("profile_image",a)}async function z(s){var t,a,n,f;m.value="";try{const b={...s,is_enabled:s.is_enabled?1:0,...k.value?{profile_image:k.value}:{}};let u;if(g.value?u=await M.update(g.value,se(b)):u=await M.create(le(b)),(u==null?void 0:u.code)===422||(u==null?void 0:u.key)==="Invalid data sent"){m.value=u.msg||"Validation error";return}j(),q()}catch(b){console.log(m),m.value=((a=(t=b.response)==null?void 0:t.data)==null?void 0:a.msg)||((f=(n=b.response)==null?void 0:n.data)==null?void 0:f.message)||"Something went wrong. Please try again."}}async function O(s){confirm(`Delete "${s.name}"?`)&&(await M.remove(s.id),q())}return T(q),(s,t)=>(i(),c(B,null,[o(l(Y),{title:"PMs Management"}),o(X,null,{default:x(()=>[e("div",ne,[e("div",{class:"flex justify-between items-center"},[t[3]||(t[3]=e("h2",{class:"text-2xl font-bold"},"Project Managers (PM)",-1)),e("button",{class:"px-4 py-2 bg-black text-white rounded",onClick:U}," + Add PM ")]),G(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>V.value=a),placeholder:"Search name, email, or phone",class:"form-input w-80"},null,512),[[H,V.value]]),e("div",re,[e("table",ie,[t[5]||(t[5]=e("thead",{class:"bg-gray-100 text-xs uppercase"},[e("tr",null,[e("th",{class:"px-4 py-3"},"#"),e("th",{class:"px-4 py-3"},"Avatar"),e("th",{class:"px-4 py-3"},"Name"),e("th",{class:"px-4 py-3"},"Email"),e("th",{class:"px-4 py-3"},"Phone"),e("th",{class:"px-4 py-3"},"Enabled"),e("th",{class:"px-4 py-3 text-right"},"Actions")])],-1)),e("tbody",null,[(i(!0),c(B,null,J(L.value,(a,n)=>(i(),c("tr",{key:a.id,class:"border-t"},[e("td",de,r((p.value-1)*E+n+1),1),e("td",ue,[a.profile_image_url?(i(),c("img",{key:0,src:a.profile_image_url,class:"w-10 h-10 rounded-full object-cover"},null,8,ce)):(i(),c("span",pe,"—"))]),e("td",me,r(a.name),1),e("td",_e,r(a.email),1),e("td",ve,r(a.country_code)+" "+r(a.phone),1),e("td",ge,[e("span",{class:Q(a.is_enabled?"text-green-600":"text-gray-400")},r(a.is_enabled?"Yes":"No"),3)]),e("td",fe,[e("button",{class:"text-blue-600",onClick:f=>I(a)},"Edit",8,he),e("button",{class:"text-red-600",onClick:f=>O(a)},"Delete",8,ye)])]))),128)),C.value.length===0?(i(),c("tr",be,t[4]||(t[4]=[e("td",{colspan:"7",class:"text-center py-6 text-gray-500"}," No PMs found ",-1)]))):P("",!0)])])]),e("div",xe,[e("span",we,"Page "+r(p.value)+" of "+r(D.value),1),e("span",ke," Showing "+r(L.value.length)+" of "+r(C.value.length),1),e("div",Ce,[e("button",{onClick:t[1]||(t[1]=a=>p.value--),disabled:p.value===1},"Prev",8,Pe),e("button",{onClick:t[2]||(t[2]=a=>p.value++),disabled:p.value===D.value},"Next",8,Me)])]),(i(),A(W,{to:"body"},[w.value?(i(),c("div",Ee,[e("div",Ve,[e("button",{class:"absolute top-3 right-3 text-gray-400",onClick:j},"✕"),e("h3",Fe,r(g.value?"Edit PM":"Add PM"),1),m.value?(i(),c("div",$e,r(m.value),1)):P("",!0),(i(),A(l(ae),{key:F.value,"validation-schema":l(R),"initial-values":$.value,onSubmit:z},{default:x(({setFieldValue:a})=>[e("div",qe,[e("div",je,[o(l(_),{name:"name",class:"form-input",placeholder:"Name"}),o(l(v),{name:"name",class:"error"})]),e("div",null,[o(l(_),{name:"email",class:"form-input",placeholder:"Email"}),o(l(v),{name:"email",class:"error"})]),e("div",Ne,[e("div",null,[o(l(_),{as:"select",name:"country_code",class:"form-input"},{default:x(()=>t[6]||(t[6]=[e("option",{value:""},"Code",-1),e("option",{value:"+20"},"+20",-1),e("option",{value:"+965"},"+965",-1)])),_:1}),o(l(v),{name:"country_code",class:"error"})]),e("div",null,[o(l(_),{name:"phone",class:"form-input",placeholder:"Phone number"}),o(l(v),{name:"phone",class:"error"})])]),e("div",null,[o(l(_),{name:"password",type:"password",class:"form-input",placeholder:g.value?"Password (optional)":"Password"},null,8,["placeholder"]),o(l(v),{name:"password",class:"error"})]),e("div",null,[o(l(_),{as:"select",name:"gender",class:"form-input"},{default:x(()=>t[7]||(t[7]=[e("option",{value:""},"Select gender",-1),e("option",{value:"male"},"Male",-1),e("option",{value:"female"},"Female",-1)])),_:1}),o(l(v),{name:"gender",class:"error"})]),e("div",null,[o(l(_),{as:"select",name:"country_name",class:"form-input"},{default:x(()=>t[8]||(t[8]=[e("option",{value:""},"Select country",-1),e("option",{value:"Egypt"},"Egypt",-1),e("option",{value:"Kuwait"},"Kuwait",-1)])),_:1}),o(l(v),{name:"country_name",class:"error"})]),e("div",Se,[o(l(_),{type:"checkbox",name:"is_enabled",value:!0}),t[9]||(t[9]=e("span",{class:"text-sm"},"Enabled",-1))]),e("div",De,[e("input",{type:"file",accept:"image/*",onChange:n=>K(n,a)},null,40,Le),o(l(v),{name:"profile_image",class:"error"})]),y.value?(i(),c("img",{key:0,src:y.value,class:"w-24 h-24 rounded border"},null,8,Ae)):P("",!0)]),e("div",{class:"flex justify-end gap-2 mt-6"},[e("button",{type:"button",class:"px-4 py-2 border rounded",onClick:j}," Cancel "),t[10]||(t[10]=e("button",{type:"submit",class:"px-4 py-2 bg-indigo-600 text-white rounded"}," Save ",-1))])]),_:1},8,["validation-schema","initial-values"]))])])):P("",!0)]))])]),_:1})],64))}},Te=oe(Be,[["__scopeId","data-v-78e670ca"]]);export{Te as default};
========
import{p as d,i as N,q as T,f as c,o as i,a as o,u as l,g as Y,w as x,b as e,j as G,c as A,k as H,h as P,F as B,s as J,t as r,n as Q,O as W}from"./app-CzdCp43o.js";import{_ as X}from"./AuthenticatedLayout-J4lJL3KR.js";import{c as Z,a as ee,g as te,b as h,F as ae,d as _,E as v}from"./index.esm-CKEvlbkd.js";import{V as M,b as se,a as le}from"./vendors-tnzRe2NL.js";import{_ as oe}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ne={class:"p-6 space-y-6"},re={class:"bg-white rounded-xl shadow border overflow-hidden"},ie={class:"w-full text-sm"},de={class:"px-4 py-3"},ue={class:"px-4 py-3"},ce=["src"],pe={key:1,class:"text-gray-400"},me={class:"px-4 py-3"},_e={class:"px-4 py-3"},ve={class:"px-4 py-3"},ge={class:"px-4 py-3"},fe={class:"px-4 py-3 text-right space-x-2"},he=["onClick"],ye=["onClick"],be={key:0},xe={class:"flex justify-between"},we={class:"text-sm"},ke={class:"text-sm text-gray-500"},Ce={class:"space-x-2"},Pe=["disabled"],Me=["disabled"],Ee={key:0,class:"fixed inset-0 bg-black/40 z-[9999] flex items-center justify-center"},Ve={class:"bg-white w-full max-w-2xl rounded-xl p-6 relative"},Fe={class:"text-lg font-bold mb-4"},$e={key:0,class:"mb-3 p-3 bg-red-50 text-red-700 rounded text-sm"},qe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},je={class:"md:col-span-2"},Ne={class:"grid grid-cols-[100px_1fr] gap-2"},Se={class:"flex items-center gap-2"},De={class:"md:col-span-2"},Le=["onChange"],Ae=["src"],E=10,Be={__name:"VendorsManagement",setup(Re){const S=d([]),V=d(""),p=d(1),w=d(!1),g=d(null),k=d(null),y=d(null),m=d(""),F=d(0),$=d({}),R=Z({name:h().required(),email:h().email().required(),country_code:h().required(),phone:h().required(),gender:h().required(),country_name:h().required(),password:h().min(8).nullable(),is_enabled:te(),profile_image:ee().nullable().test("required","Please select profile image",function(s){return g.value?!0:s instanceof File})});async function q(){S.value=await M.list()}const C=N(()=>{const s=V.value.toLowerCase();return S.value.filter(t=>{var a,n,f;return((a=t.name)==null?void 0:a.toLowerCase().includes(s))||((n=t.email)==null?void 0:n.toLowerCase().includes(s))||((f=t.phone)==null?void 0:f.includes(s))})}),D=N(()=>Math.ceil(C.value.length/E)),L=N(()=>C.value.slice((p.value-1)*E,p.value*E));function U(){g.value=null,m.value="",$.value={name:"",email:"",phone:"",country_code:"",gender:"",country_name:"",is_enabled:!0,password:"",profile_image:null},k.value=null,y.value=null,F.value++,w.value=!0}function I(s){g.value=s.id,m.value="",$.value={name:s.name,email:s.email,phone:s.phone,country_code:s.country_code,gender:s.gender,country_name:s.country_name,is_enabled:!!s.is_enabled,password:"",profile_image:null},y.value=s.profile_image_url||null,F.value++,w.value=!0}function j(){w.value=!1}function K(s,t){var n;const a=((n=s.target.files)==null?void 0:n[0])||null;k.value=a,y.value=a?URL.createObjectURL(a):null,t("profile_image",a)}async function z(s){var t,a,n,f;m.value="";try{const b={...s,is_enabled:s.is_enabled?1:0,...k.value?{profile_image:k.value}:{}};let u;if(g.value?u=await M.update(g.value,se(b)):u=await M.create(le(b)),(u==null?void 0:u.code)===422||(u==null?void 0:u.key)==="Invalid data sent"){m.value=u.msg||"Validation error";return}j(),q()}catch(b){console.log(m),m.value=((a=(t=b.response)==null?void 0:t.data)==null?void 0:a.msg)||((f=(n=b.response)==null?void 0:n.data)==null?void 0:f.message)||"Something went wrong. Please try again."}}async function O(s){confirm(`Delete "${s.name}"?`)&&(await M.remove(s.id),q())}return T(q),(s,t)=>(i(),c(B,null,[o(l(Y),{title:"PMs Management"}),o(X,null,{default:x(()=>[e("div",ne,[e("div",{class:"flex justify-between items-center"},[t[3]||(t[3]=e("h2",{class:"text-2xl font-bold"},"Project Managers (PM)",-1)),e("button",{class:"px-4 py-2 bg-black text-white rounded",onClick:U}," + Add PM ")]),G(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>V.value=a),placeholder:"Search name, email, or phone",class:"form-input w-80"},null,512),[[H,V.value]]),e("div",re,[e("table",ie,[t[5]||(t[5]=e("thead",{class:"bg-gray-100 text-xs uppercase"},[e("tr",null,[e("th",{class:"px-4 py-3"},"#"),e("th",{class:"px-4 py-3"},"Avatar"),e("th",{class:"px-4 py-3"},"Name"),e("th",{class:"px-4 py-3"},"Email"),e("th",{class:"px-4 py-3"},"Phone"),e("th",{class:"px-4 py-3"},"Enabled"),e("th",{class:"px-4 py-3 text-right"},"Actions")])],-1)),e("tbody",null,[(i(!0),c(B,null,J(L.value,(a,n)=>(i(),c("tr",{key:a.id,class:"border-t"},[e("td",de,r((p.value-1)*E+n+1),1),e("td",ue,[a.profile_image_url?(i(),c("img",{key:0,src:a.profile_image_url,class:"w-10 h-10 rounded-full object-cover"},null,8,ce)):(i(),c("span",pe,"—"))]),e("td",me,r(a.name),1),e("td",_e,r(a.email),1),e("td",ve,r(a.country_code)+" "+r(a.phone),1),e("td",ge,[e("span",{class:Q(a.is_enabled?"text-green-600":"text-gray-400")},r(a.is_enabled?"Yes":"No"),3)]),e("td",fe,[e("button",{class:"text-blue-600",onClick:f=>I(a)},"Edit",8,he),e("button",{class:"text-red-600",onClick:f=>O(a)},"Delete",8,ye)])]))),128)),C.value.length===0?(i(),c("tr",be,t[4]||(t[4]=[e("td",{colspan:"7",class:"text-center py-6 text-gray-500"}," No PMs found ",-1)]))):P("",!0)])])]),e("div",xe,[e("span",we,"Page "+r(p.value)+" of "+r(D.value),1),e("span",ke," Showing "+r(L.value.length)+" of "+r(C.value.length),1),e("div",Ce,[e("button",{onClick:t[1]||(t[1]=a=>p.value--),disabled:p.value===1},"Prev",8,Pe),e("button",{onClick:t[2]||(t[2]=a=>p.value++),disabled:p.value===D.value},"Next",8,Me)])]),(i(),A(W,{to:"body"},[w.value?(i(),c("div",Ee,[e("div",Ve,[e("button",{class:"absolute top-3 right-3 text-gray-400",onClick:j},"✕"),e("h3",Fe,r(g.value?"Edit PM":"Add PM"),1),m.value?(i(),c("div",$e,r(m.value),1)):P("",!0),(i(),A(l(ae),{key:F.value,"validation-schema":l(R),"initial-values":$.value,onSubmit:z},{default:x(({setFieldValue:a})=>[e("div",qe,[e("div",je,[o(l(_),{name:"name",class:"form-input",placeholder:"Name"}),o(l(v),{name:"name",class:"error"})]),e("div",null,[o(l(_),{name:"email",class:"form-input",placeholder:"Email"}),o(l(v),{name:"email",class:"error"})]),e("div",Ne,[e("div",null,[o(l(_),{as:"select",name:"country_code",class:"form-input"},{default:x(()=>t[6]||(t[6]=[e("option",{value:""},"Code",-1),e("option",{value:"+20"},"+20",-1),e("option",{value:"+965"},"+965",-1)])),_:1}),o(l(v),{name:"country_code",class:"error"})]),e("div",null,[o(l(_),{name:"phone",class:"form-input",placeholder:"Phone number"}),o(l(v),{name:"phone",class:"error"})])]),e("div",null,[o(l(_),{name:"password",type:"password",class:"form-input",placeholder:g.value?"Password (optional)":"Password"},null,8,["placeholder"]),o(l(v),{name:"password",class:"error"})]),e("div",null,[o(l(_),{as:"select",name:"gender",class:"form-input"},{default:x(()=>t[7]||(t[7]=[e("option",{value:""},"Select gender",-1),e("option",{value:"male"},"Male",-1),e("option",{value:"female"},"Female",-1)])),_:1}),o(l(v),{name:"gender",class:"error"})]),e("div",null,[o(l(_),{as:"select",name:"country_name",class:"form-input"},{default:x(()=>t[8]||(t[8]=[e("option",{value:""},"Select country",-1),e("option",{value:"Egypt"},"Egypt",-1),e("option",{value:"Kuwait"},"Kuwait",-1)])),_:1}),o(l(v),{name:"country_name",class:"error"})]),e("div",Se,[o(l(_),{type:"checkbox",name:"is_enabled",value:!0}),t[9]||(t[9]=e("span",{class:"text-sm"},"Enabled",-1))]),e("div",De,[e("input",{type:"file",accept:"image/*",onChange:n=>K(n,a)},null,40,Le),o(l(v),{name:"profile_image",class:"error"})]),y.value?(i(),c("img",{key:0,src:y.value,class:"w-24 h-24 rounded border"},null,8,Ae)):P("",!0)]),e("div",{class:"flex justify-end gap-2 mt-6"},[e("button",{type:"button",class:"px-4 py-2 border rounded",onClick:j}," Cancel "),t[10]||(t[10]=e("button",{type:"submit",class:"px-4 py-2 bg-indigo-600 text-white rounded"}," Save ",-1))])]),_:1},8,["validation-schema","initial-values"]))])])):P("",!0)]))])]),_:1})],64))}},Te=oe(Be,[["__scopeId","data-v-78e670ca"]]);export{Te as default};
>>>>>>>> origin/main:public/build/assets/VendorsManagement-CKZtXd6_.js
