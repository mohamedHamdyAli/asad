import{l as n,i as k,p as S,z as F,c as L,o as s,w as T,b as t,f as o,t as p,F as B,q as E,j as V,s as j}from"./app-C-x1AC2s.js";import{_ as M}from"./AuthenticatedLayout-gdQDWDWu.js";import{h as f}from"./http-CwBICM-q.js";const U={class:"p-6 space-y-6"},$={key:0,class:"p-3 bg-red-50 text-red-600 rounded"},z={key:1,class:"text-sm text-gray-500"},C={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},D={class:"block text-sm font-medium text-gray-600 mb-1"},N=["onUpdate:modelValue"],O={class:"text-right pt-4"},q=["disabled"],H={__name:"LanguageEditor",props:{id:[Number,String],type:String},setup(m){const g=m;function y(){const e=window.location.pathname.match(/\/language\/editor\/(\d+)\/([A-Za-z_]+)/);return e?{id:e[1],type:e[2]}:{id:null,type:"all"}}const _=y(),i=g.id??_.id,l=n({}),r=n(!1),d=n(!1),u=n(""),h=n(!1),b=k(()=>Object.keys(l.value??{}));async function v(){var e;if(!i){u.value="Missing language id.";return}r.value=!0;try{const{data:a}=await f.get(`/language/languageedit/${i}/all`);l.value=((e=a==null?void 0:a.data)==null?void 0:e.enLabels)||{}}catch{u.value="Failed to load language data."}finally{r.value=!1}}async function x(){if(i){d.value=!0;try{await f.post(`/language/updatelanguageValues/${i}/all`,{values:l.value}),alert("Translations updated successfully.")}catch{alert("Save failed")}finally{d.value=!1}}}return S(v),F(()=>[g.id,g.type],()=>{h.value=!1,v()}),(e,a)=>(s(),L(M,null,{default:T(()=>[t("div",U,[a[0]||(a[0]=t("div",{class:"flex justify-between items-center"},[t("h2",{class:"text-2xl font-semibold text-gray-800"},"Translate Language File")],-1)),u.value?(s(),o("div",$,p(u.value),1)):r.value?(s(),o("div",z,"Loading…")):(s(),o("div",C,[(s(!0),o(B,null,E(b.value,c=>(s(),o("div",{key:c},[t("label",D,p(c),1),V(t("input",{"onUpdate:modelValue":w=>l.value[c]=w,type:"text",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter translation"},null,8,N),[[j,l.value[c]]])]))),128))])),t("div",O,[t("button",{disabled:d.value||r.value,onClick:x,class:"bg-green-600 text-white px-6 py-2 rounded hover:bg-green-700 disabled:opacity-50"},p(d.value?"Saving…":"Save"),9,q)])])]),_:1}))}};export{H as default};
