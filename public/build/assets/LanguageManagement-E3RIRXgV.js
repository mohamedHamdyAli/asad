import{p,q as ne,f as i,o as d,a as $,u as N,g as se,w as O,b as a,h as m,j as y,k as b,t as c,e as A,v as K,F as D,s as B,S as oe}from"./app-srVYKMc4.js";import{I as P,_ as ie}from"./AuthenticatedLayout-DZhpfcPI.js";import{h as x}from"./http-BKj0Q1ht.js";import{_ as de}from"./_plugin-vue_export-helper-DlAUqK2U.js";const I={list:(u={})=>x.get("/api/language/list",{params:u}),create:u=>x.post("/api/language/create",u),show:u=>x.get(`/api/language/${u}`),update:(u,h)=>x.post(`/api/language/${u}`,h),remove:u=>x.delete(`/api/language/delete/${u}`),setUI:u=>x.post(`/api/set-language/${u}`),getFile:(u,h)=>x.get(`/api/language/languageedit/${u}/${h}`),saveFile:(u,h,w)=>x.post(`/api/language/updatelanguageValues/${u}/${h}`,{values:w})},ue={class:"p-6"},re={class:"flex flex-col lg:flex-row gap-6 items-start"},ce={class:"w-full lg:w-1/4"},ge={class:"bg-white rounded-xl shadow-lg p-6"},pe={class:"grid gap-3 mb-4"},me={key:0,class:"text-xs text-red-600 mt-1"},ve={key:0,class:"text-xs text-red-600 mt-1"},fe={key:0,class:"text-xs text-red-600 mt-1"},ye={key:0,class:"text-xs text-red-600 mt-1"},xe={key:0,class:"text-xs text-red-600 mt-1"},_e={class:"flex items-center gap-2 text-sm text-gray-600"},he=["disabled"],be={class:"w-full lg:w-3/4"},we={class:"bg-white shadow rounded-lg p-4 h-[600px] overflow-y-auto"},ke={class:"font-bold text-gray-800"},Ce={class:"text-sm text-gray-500"},Le={class:"Lang-image"},Ee=["src","alt"],$e={class:"flex gap-3 items-center"},Ue={class:"relative"},Ve=["onClick"],je={key:0,class:"absolute z-[100] mt-2 w-56 bg-white border rounded shadow -left-40"},Fe=["onClick"],Me=["onClick"],Ne={key:0,class:"fixed inset-0 z-[200] bg-black/40 flex items-center justify-center"},Se={class:"bg-white w-full max-w-2xl rounded-xl shadow-lg p-6 relative"},Ae={key:0,class:"text-sm text-gray-500"},De={key:1,class:"grid gap-3"},Ie={key:0,class:"text-xs text-red-600 mt-1"},Re={key:0,class:"text-xs text-red-600 mt-1"},Te={class:"grid grid-cols-2 gap-3"},qe={key:0,class:"text-xs text-red-600 mt-1"},Oe={key:0,class:"text-xs text-red-600 mt-1"},Ke={class:"flex items-center gap-2 text-sm text-gray-600"},Be={class:"grid grid-cols-1 md:grid-cols-2 gap-3 items-center"},Pe={key:0,class:"text-xs text-red-600 mt-1"},ze={class:"flex items-center gap-3"},Ge=["src"],We=["src"],He={key:2,class:"text-xs text-gray-500"},Je={class:"text-right pt-2"},Qe=["disabled"],Xe={__name:"LanguageManagement",setup(u){const h=p([]),w=p({}),U=p(!1),o=p({name:"",english_name:"",code:"",country_code:"",rtl:!1,icon:null}),L=p({}),v=l=>{var e;return(e=L.value)!=null&&e[l]?L.value[l]:""};function z(l){var e;o.value.icon=((e=l.target.files)==null?void 0:e[0])||null}function G(){const l={};return o.value.name||(l.name="Language name is required."),o.value.code?o.value.code.length>10&&(l.code="Code must be ≤ 10 characters."):l.code="Code is required.",o.value.country_code&&o.value.country_code.length>5&&(l.country_code="Country code must be ≤ 5 characters."),L.value=l,Object.keys(l).length===0}async function V(){const{data:l}=await I.list();h.value=l.data||[]}ne(V);async function W(){var l,e,t,r;if(G()){U.value=!0;try{const n=new FormData;n.append("name",o.value.name),n.append("name_en",o.value.english_name||""),n.append("code",o.value.code),n.append("country_code",o.value.country_code||""),n.append("app_scope","all"),n.append("rtl",o.value.rtl?1:0),o.value.icon&&n.append("icon",o.value.icon),await I.create(n),H(),await V()}catch(n){const g=(e=(l=n==null?void 0:n.response)==null?void 0:l.data)==null?void 0:e.errors;if(g&&typeof g=="object"){const E={};Object.keys(g).forEach(_=>{E[_]=Array.isArray(g[_])?g[_][0]:String(g[_])}),L.value=E}else alert(((r=(t=n==null?void 0:n.response)==null?void 0:t.data)==null?void 0:r.message)||"Create failed")}finally{U.value=!1}}}function H(){o.value={name:"",english_name:"",code:"",country_code:"",rtl:!1,icon:null},L.value={}}const J=[{type:"panel",label:"Edit Admin Panel Keywords"},{type:"app",label:"Edit User App Keywords"},{type:"vendor",label:"Edit Dashboard Keywords"},{type:"web",label:"Edit Website Keywords"}];function Q(l){w.value[l]=!w.value[l]}function R(l){w.value[l]=!1}function X(l,e){return`/language/editor/${l}/${e}`}async function Y(l){confirm(`Delete ${l.name}?`)&&(await I.remove(l.id),await V())}const T=["https://flagcdn.com/w320/us.png","https://flagcdn.com/w320/fr.png","https://flagcdn.com/w320/de.png","https://flagcdn.com/w320/eg.png","https://flagcdn.com/w320/jp.png"];function Z(l){const e=Math.floor(Math.random()*T.length);l.target.src=T[e]}const j=p(!1),S=p(!1),F=p(!1),k=p({}),f=l=>{var e;return(e=k.value)!=null&&e[l]?k.value[l]:""},M=p(null),s=p({name:"",english_name:"",code:"",country_code:"",rtl:!1,icon:null,icon_url:null}),C=p(null);async function ee(l){R(l),M.value=l,j.value=!0,S.value=!0,k.value={},C.value=null;try{const{data:e}=await x.get(`/api/language/one/${l}`),t=e==null?void 0:e.data;s.value={name:(t==null?void 0:t.name)??"",english_name:(t==null?void 0:t.english_name)??(t==null?void 0:t.name_en)??"",code:(t==null?void 0:t.code)??"",country_code:(t==null?void 0:t.country_code)??"",rtl:!!(t!=null&&t.rtl),icon:null,icon_url:(t==null?void 0:t.icon_url)??null}}catch(e){console.error(e),alert("Failed to load language details."),j.value=!1}finally{S.value=!1}}function q(){j.value=!1,M.value=null,k.value={},C.value=null}function te(l){var t;const e=((t=l.target.files)==null?void 0:t[0])||null;if(s.value.icon=e,e){const r=new FileReader;r.onload=()=>{C.value=r.result},r.readAsDataURL(e)}else C.value=null}function ae(){const l={};return s.value.name||(l.name="Language name is required."),s.value.code?s.value.code.length>10&&(l.code="Code must be ≤ 10 characters."):l.code="Code is required.",s.value.country_code&&s.value.country_code.length>5&&(l.country_code="Country code must be ≤ 5 characters."),k.value=l,Object.keys(l).length===0}async function le(){var l,e,t,r;if(M.value&&ae()){F.value=!0;try{const n=new FormData;n.append("name",s.value.name),n.append("name_en",s.value.english_name||""),n.append("code",s.value.code),n.append("country_code",s.value.country_code||""),n.append("rtl",s.value.rtl?1:0),s.value.icon&&n.append("icon",s.value.icon),await x.post(`/api/language/update/${M.value}`,n,{headers:{"Content-Type":"multipart/form-data"}}),alert("Language updated successfully."),q(),await V()}catch(n){const g=(e=(l=n==null?void 0:n.response)==null?void 0:l.data)==null?void 0:e.errors;if(g&&typeof g=="object"){const E={};Object.keys(g).forEach(_=>{E[_]=Array.isArray(g[_])?g[_][0]:String(g[_])}),k.value=E}else console.error(n),alert(((r=(t=n==null?void 0:n.response)==null?void 0:t.data)==null?void 0:r.message)||"Update failed.")}finally{F.value=!1}}}return(l,e)=>(d(),i(D,null,[$(N(se),{title:"Language Management"}),$(ie,null,{default:O(()=>[a("div",ue,[e[14]||(e[14]=a("h2",{class:"text-2xl font-semibold text-dash-title mb-6"},"Language Management",-1)),a("div",re,[a("div",ce,[a("div",ge,[e[11]||(e[11]=a("h3",{class:"text-xl font-bold text-gray-800 mb-6"},"Add New Language",-1)),a("div",pe,[a("div",null,[y(a("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.value.name=t),type:"text",placeholder:"Language Name",class:"form-input"},null,512),[[b,o.value.name,void 0,{trim:!0}]]),v("name")?(d(),i("p",me,c(v("name")),1)):m("",!0)]),a("div",null,[y(a("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.value.english_name=t),type:"text",placeholder:"Language Name (English)",class:"form-input"},null,512),[[b,o.value.english_name,void 0,{trim:!0}]]),v("english_name")?(d(),i("p",ve,c(v("english_name")),1)):m("",!0)]),a("div",null,[y(a("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.value.code=t),type:"text",placeholder:"Code (e.g., ar, en)",class:"form-input"},null,512),[[b,o.value.code,void 0,{trim:!0}]]),v("code")?(d(),i("p",fe,c(v("code")),1)):m("",!0)]),a("div",null,[y(a("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>o.value.country_code=t),type:"text",placeholder:"Country Code (e.g., EG, US)",class:"form-input"},null,512),[[b,o.value.country_code,void 0,{trim:!0}]]),v("country_code")?(d(),i("p",ye,c(v("country_code")),1)):m("",!0)]),a("div",null,[a("input",{type:"file",accept:"image/*",class:"form-input",onChange:z},null,32),v("icon")?(d(),i("p",xe,c(v("icon")),1)):m("",!0)]),a("label",_e,[y(a("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>o.value.rtl=t),type:"checkbox"},null,512),[[K,o.value.rtl]]),e[10]||(e[10]=A(" RTL (Right to Left) "))]),a("button",{disabled:U.value,onClick:W,class:"bg-black text-white px-3 py-2 rounded hover:bg-gray-700 disabled:opacity-50"},c(U.value?"Saving…":"+ Add New Language"),9,he)])])]),a("div",be,[a("div",we,[e[13]||(e[13]=a("h3",{class:"text-lg font-semibold mb-4"},"Languages",-1)),(d(!0),i(D,null,B(h.value,t=>(d(),i("div",{key:t.id,class:"border-b py-3 px-2 flex justify-between items-center"},[a("div",null,[a("div",ke,c(t.name),1),a("div",Ce,"Code: "+c(t.code),1)]),a("div",Le,[a("img",{src:t.icon_url||`/images/flags/${t.code}.png`,alt:t.name,class:"w-8 h-6 object-cover",onError:Z},null,40,Ee)]),a("div",$e,[a("div",Ue,[a("button",{onClick:r=>Q(t.id),title:"Edit",class:"text-blue-600 hover:text-blue-800"},[$(N(P),{icon:"mdi:pencil-outline",class:"w-5 h-5"})],8,Ve),w.value[t.id]?(d(),i("div",je,[a("button",{class:"dropdown-item w-full text-left",onClick:r=>ee(t.id)}," Edit Language Details ",8,Fe),e[12]||(e[12]=a("div",{class:"h-px bg-gray-100 my-1"},null,-1)),(d(),i(D,null,B(J,r=>$(N(oe),{key:r.type,class:"dropdown-item",href:X(t.id,r.type),onClick:n=>R(t.id)},{default:O(()=>[A(c(r.label),1)]),_:2},1032,["href","onClick"])),64))])):m("",!0)]),a("button",{onClick:r=>Y(t),title:"Delete",class:"text-red-600 hover:text-red-800"},[$(N(P),{icon:"mdi:trash-can-outline",class:"w-5 h-5"})],8,Me)])]))),128))])])])]),j.value?(d(),i("div",Ne,[a("div",Se,[a("button",{class:"absolute top-3 right-4 text-gray-500 hover:text-black",onClick:q},"✕"),e[21]||(e[21]=a("h3",{class:"text-xl font-bold text-gray-800 mb-4"},"Edit Language Details",-1)),S.value?(d(),i("div",Ae,"Loading…")):(d(),i("div",De,[a("div",null,[e[15]||(e[15]=a("label",{class:"text-sm text-gray-600"},"Language Name",-1)),y(a("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>s.value.name=t),type:"text",class:"form-input"},null,512),[[b,s.value.name,void 0,{trim:!0}]]),f("name")?(d(),i("p",Ie,c(f("name")),1)):m("",!0)]),a("div",null,[e[16]||(e[16]=a("label",{class:"text-sm text-gray-600"},"Language Name (English)",-1)),y(a("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>s.value.english_name=t),type:"text",class:"form-input"},null,512),[[b,s.value.english_name,void 0,{trim:!0}]]),f("english_name")?(d(),i("p",Re,c(f("english_name")),1)):m("",!0)]),a("div",Te,[a("div",null,[e[17]||(e[17]=a("label",{class:"text-sm text-gray-600"},"Code",-1)),y(a("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>s.value.code=t),type:"text",class:"form-input",placeholder:"e.g., en, ar"},null,512),[[b,s.value.code,void 0,{trim:!0}]]),f("code")?(d(),i("p",qe,c(f("code")),1)):m("",!0)]),a("div",null,[e[18]||(e[18]=a("label",{class:"text-sm text-gray-600"},"Country Code",-1)),y(a("input",{"onUpdate:modelValue":e[8]||(e[8]=t=>s.value.country_code=t),type:"text",class:"form-input",placeholder:"e.g., EG, US"},null,512),[[b,s.value.country_code,void 0,{trim:!0}]]),f("country_code")?(d(),i("p",Oe,c(f("country_code")),1)):m("",!0)])]),a("label",Ke,[y(a("input",{"onUpdate:modelValue":e[9]||(e[9]=t=>s.value.rtl=t),type:"checkbox"},null,512),[[K,s.value.rtl]]),e[19]||(e[19]=A(" RTL (Right to Left) "))]),a("div",Be,[a("div",null,[e[20]||(e[20]=a("label",{class:"text-sm text-gray-600"},"Icon",-1)),a("input",{type:"file",accept:"image/*",class:"form-input",onChange:te},null,32),f("icon")?(d(),i("p",Pe,c(f("icon")),1)):m("",!0)]),a("div",ze,[C.value?(d(),i("img",{key:0,src:C.value,class:"w-10 h-8 rounded border object-cover",alt:"Preview"},null,8,Ge)):s.value.icon_url?(d(),i("img",{key:1,src:s.value.icon_url,class:"w-10 h-8 rounded border object-cover",alt:"Current"},null,8,We)):(d(),i("span",He,"No icon"))])]),a("div",Je,[a("button",{disabled:F.value,onClick:le,class:"bg-black text-white px-3 py-2 rounded hover:bg-gray-700 disabled:opacity-50"},c(F.value?"Saving…":"Save Changes"),9,Qe)])]))])])):m("",!0)]),_:1})],64))}},at=de(Xe,[["__scopeId","data-v-f388a42b"]]);export{at as default};
