import{p as x,r as se,i as I,C as De,q as Ve,c as Ae,o as n,w as h,b as t,f as r,h as c,j as g,k as y,y as M,F as L,s as S,t as o,e as _,a as w,u as q,S as C,A as je,d as Pe,n as b,B as le}from"./app-ClrU1S9T.js";import{_ as Le}from"./AuthenticatedLayout-Dd4kH34h.js";import{M as Se}from"./MapPicker-CPtR0Uys.js";import{U as A,b as Ne,a as Ee}from"./units-CJABA9W_.js";import{U as $e}from"./users-DkghGlVu.js";import{V as Ie}from"./vendors-BOgPemuI.js";import{_ as Me}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Re={class:"p-6 space-y-6"},Fe={class:"bg-white p-4 rounded-xl shadow-sm ring-1 ring-black/5"},Ge={class:"grid grid-cols-1 md:grid-cols-4 gap-3"},Oe={class:"bg-white rounded-xl shadow-sm ring-1 ring-black/5 overflow-x-auto"},ze={class:"min-w-full text-sm"},Be={key:0},Te={class:"px-4 py-2"},Ke={class:"px-4 py-2"},He={class:"font-medium text-gray-900"},Je={class:"text-gray-500",dir:"rtl"},Qe={class:"px-4 py-2"},We={class:"text-gray-900"},Xe={key:0,class:"text-xs text-gray-500"},Ye={class:"px-4 py-2"},Ze={class:"px-4 py-2"},et={class:"inline-flex items-center rounded-full bg-gray-100 px-2 py-0.5 text-xs border"},tt={class:"px-4 py-2 space-x-2"},st=["href"],lt=["onClick"],at=["onClick"],nt={key:1},ot={class:"flex items-center justify-between px-4 py-3 border-t"},rt={class:"text-xs text-gray-500"},it={class:"flex items-center gap-2"},dt=["disabled"],ut={class:"text-sm"},ct=["disabled"],vt={key:0,class:"fixed inset-0 z-50 modal-top"},pt={class:"relative mx-auto w-full max-w-5xl p-6 sm:p-8 h-full flex items-center justify-center"},mt={class:"bg-white rounded-2xl shadow-2xl w-full max-h-[90vh] overflow-y-auto transition-all"},gt={key:0,class:"p-5 text-sm text-gray-500"},xt={key:1,class:"p-6 space-y-6"},ft={class:"relative rounded-xl overflow-hidden shadow-md h-64 sm:h-72 md:h-80"},bt=["src"],yt={key:1,class:"absolute inset-0 flex items-center justify-center bg-gray-100 text-gray-400 text-sm"},_t={class:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent flex flex-col justify-end p-6 text-white"},ht={class:"text-2xl font-bold"},wt={key:0,class:"text-sm text-gray-200",dir:"rtl"},kt={class:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm"},qt={class:"bg-gray-50 rounded-lg p-3"},Ct={class:"font-semibold text-gray-800"},Ut={class:"bg-gray-50 rounded-lg p-3"},Dt={class:"font-semibold text-gray-800"},Vt={class:"bg-gray-50 rounded-lg p-3"},At={class:"font-semibold text-gray-800"},jt={class:"bg-white border rounded-xl p-5 shadow-sm"},Pt={class:"text-sm text-gray-700 whitespace-pre-wrap mb-4"},Lt={class:"text-sm text-gray-700 whitespace-pre-wrap",dir:"rtl"},St={key:0,class:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2"},Nt=["src"],Et={key:1,class:"text-sm text-gray-500"},$t={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-4 gap-3 pt-4 border-t"},It={class:"relative mx-auto w-full max-w-3xl p-4 sm:p-6 h-full flex items-center justify-center"},Mt={class:"bg-white rounded-2xl shadow-lg w-full max-h-[min(88vh,900px)] overflow-y-auto focus:outline-none"},Rt={class:"sticky top-0 z-10 bg-white border-b rounded-t-2xl"},Ft={class:"flex items-center justify-between px-5 py-3"},Gt={class:"text-lg font-bold"},Ot={class:"px-5 py-4 space-y-4"},zt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Bt=["required"],Tt={key:0,class:"mt-1 text-xs text-red-600"},Kt=["required"],Ht={key:0,class:"mt-1 text-xs text-red-600"},Jt={class:"md:col-span-2"},Qt=["required"],Wt={key:0,class:"mt-1 text-xs text-red-600"},Xt={class:"md:col-span-2"},Yt=["required"],Zt={key:0,class:"mt-1 text-xs text-red-600"},es={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ts={class:"md:col-span-2"},ss=["required"],ls={key:0,class:"mt-1 text-xs text-red-600"},as=["required"],ns={key:0,class:"mt-1 text-xs text-red-600"},os=["required"],rs={key:0,class:"mt-1 text-xs text-red-600"},is=["required"],ds={key:0,class:"mt-1 text-xs text-red-600"},us=["required"],cs={key:0,class:"mt-1 text-xs text-red-600"},vs={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ps=["required"],ms=["value"],gs={key:0,class:"mt-1 text-xs text-red-600"},xs=["required"],fs=["value"],bs={key:0,class:"mt-1 text-xs text-red-600"},ys={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},_s={class:"block text-xs text-gray-500 mb-1"},hs=["required"],ws={key:0,class:"mt-1 text-xs text-red-600"},ks={key:1,class:"mt-2 relative inline-block"},qs=["src"],Cs=["required"],Us={key:0,class:"mt-1 text-xs text-red-600"},Ds={key:1,class:"mt-2 flex flex-wrap gap-2"},Vs=["src"],As=["onClick"],js={key:2,class:"mt-2 flex flex-wrap gap-2"},Ps=["src"],Ls=["onClick"],Ss={key:0,class:"rounded border border-red-200 bg-red-50 text-red-700 px-3 py-2"},Ns={class:"sticky bottom-0 z-10 bg-white border-t rounded-b-2xl"},Es={class:"px-5 py-3 flex items-center gap-3"},$s=["disabled"],Is={__name:"Index",setup(Ms){const H=x([]),R=x(!1),p=se({q:"",status:"",from:"",to:""}),U=x(1),j=x(10),N=I(()=>{let l=[...H.value];const e=p.q.trim().toLowerCase();return e&&(l=l.filter(s=>(s.name_en||"").toLowerCase().includes(e)||(s.name_ar||"").toLowerCase().includes(e)||(s.location||"").toLowerCase().includes(e))),p.status&&(l=l.filter(s=>s.status===p.status)),p.from&&(l=l.filter(s=>!s.start_date||s.start_date>=p.from)),p.to&&(l=l.filter(s=>!s.end_date||s.end_date<=p.to)),l}),z=I(()=>(U.value-1)*j.value),J=I(()=>Math.min(z.value+j.value,N.value.length)),ae=I(()=>N.value.slice(z.value,J.value));De([()=>p.q,()=>p.status,()=>p.from,()=>p.to,j],()=>{U.value=1});async function B(){R.value=!0;try{H.value=await A.list()}finally{R.value=!1}}const Q=x(!1),T=se({loading:!1,data:null}),v=I(()=>T.data||{});function K(){Q.value=!1,T.data=null}const F=x(!1),d=x(null),k=x({}),D=x(""),G=x(!1),a=x({name:{en:"",ar:""},description:{en:"",ar:""},location:"",lat:null,long:null,start_date:"",end_date:"",user_id:null,vendor_id:null,status:"under_construction",cover_image:null,gallery:[]}),V=x(null),E=x([]),P=x([]),W=x([]),X=x([]),m=(l,e)=>{if(!e||Array.isArray(e)&&e.length===0){delete k.value[l];return}k.value[l]=Array.isArray(e)?e:[String(e)]},i=l=>{var e;return((e=k.value[l])==null?void 0:e[0])||""},ne=l=>!!k.value[l],f=l=>["form-input",ne(l)?"border-red-400 focus:ring-red-500":""].join(" ");function oe(l){return`/units-management/${l}/docs`}function re(l){return`/units-management/${l}/gallery`}function ie(l){return`/units-management/${l}/drawing`}function de(l){return`/units-management/${l}/reports`}function ue(l){return`/units-management/${l}/phases`}function ce(l){return`/units-management/${l}/timeline`}function ve(l){return`/units-management/${l}/contractors`}function pe(l){return`/units-management/${l}/payments`}function me(l){return`/units-management/${l}/details`}function Y(){const l=document.querySelector(".max-h-\\[min\\(88vh\\,900px\\)\\]"),e=l==null?void 0:l.querySelector("input.border-red-400, select.border-red-400, textarea.border-red-400");e&&e.scrollIntoView({behavior:"smooth",block:"center"})}function ge(){k.value={},D.value="";const l=a.value,e=s=>s!=null&&String(s).trim()!=="";return d.value?(l.lat!==null&&(l.lat<-90||l.lat>90)&&m("lat","Latitude must be between -90 and 90"),l.long!==null&&(l.long<-180||l.long>180)&&m("long","Longitude must be between -180 and 180"),e(l.start_date)&&e(l.end_date)&&new Date(l.end_date)<new Date(l.start_date)&&m("end_date","End date must be after or equal to start date")):(e(l.name.en)||m("name.en","Name (EN) is required"),e(l.name.ar)||m("name.ar","Name (AR) is required"),e(l.description.en)||m("description.en","Description (EN) is required"),e(l.description.ar)||m("description.ar","Description (AR) is required"),e(l.location)||m("location","Location is required"),typeof l.lat=="number"&&l.lat>=-90&&l.lat<=90||m("lat","Latitude must be between -90 and 90"),typeof l.long=="number"&&l.long>=-180&&l.long<=180||m("long","Longitude must be between -180 and 180"),e(l.start_date)||m("start_date","Start date is required"),e(l.end_date)||m("end_date","End date is required"),e(l.start_date)&&e(l.end_date)&&new Date(l.end_date)<new Date(l.start_date)&&m("end_date","End date must be after or equal to start date"),e(l.user_id)||m("user_id","User is required"),e(l.vendor_id)||m("vendor_id","Vendor is required"),l.cover_image||m("cover_image","Cover image is required"),(!Array.isArray(l.gallery)||l.gallery.length===0)&&m("gallery","Add at least one gallery image")),Object.keys(k.value).length?(D.value="Please fix the highlighted fields.",!1):!0}function xe(){Z(),F.value=!0}async function fe(l){Z(),d.value=l.id;const e=await A.show(l.id);a.value.name.en=e.name_en||"",a.value.name.ar=e.name_ar||"",a.value.description.en=e.description_en||"",a.value.description.ar=e.description_ar||"",a.value.location=e.location||"",a.value.lat=e.lat,a.value.long=e.long,a.value.start_date=e.start_date||"",a.value.end_date=e.end_date||"",a.value.user_id=e.user_id??null,a.value.vendor_id=e.vendor_id??null,a.value.status=e.status||"under_construction",V.value=e.cover_image_url||null,P.value=Array.isArray(e.gallery)?e.gallery:[],F.value=!0}function Z(){a.value={name:{en:"",ar:""},description:{en:"",ar:""},location:"",lat:null,long:null,start_date:"",end_date:"",user_id:null,vendor_id:null,status:"under_construction",cover_image:null,gallery:[]},V.value=null,E.value=[],P.value=[],k.value={},D.value="",d.value=null}function $(){F.value=!1}function be(l){var s;const e=((s=l.target.files)==null?void 0:s[0])||null;a.value.cover_image=e,V.value=e?URL.createObjectURL(e):V.value}function ye(l){const e=Array.from(l.target.files||[]);a.value.gallery=e,E.value=e.map(s=>URL.createObjectURL(s))}async function _e(){confirm("Delete cover image?")&&(await A.deleteCover(d.value),V.value=null)}async function he(l){confirm("Delete this image?")&&(await A.deleteGalleryImage(d.value,l),P.value=P.value.filter(e=>e.id!==l))}function we(l){var s,u,O,te;const e=(u=(s=l==null?void 0:l.response)==null?void 0:s.data)==null?void 0:u.errors;if(!e)return!1;k.value={};for(const[Ce,Ue]of Object.entries(e))m(Ce,Ue);return D.value=((te=(O=l==null?void 0:l.response)==null?void 0:O.data)==null?void 0:te.message)||"Validation failed. Please review the fields below.",!0}async function ee(){var l,e,s;G.value=!0;try{if(!ge()){await le(),Y();return}if(d.value){const u=Ne(a.value);await A.update(d.value,u)}else{const u=Ee(a.value);await A.create(u)}await B(),$()}catch(u){((l=u==null?void 0:u.response)==null?void 0:l.status)===422&&we(u)?(await le(),Y()):D.value=((s=(e=u==null?void 0:u.response)==null?void 0:e.data)==null?void 0:s.message)||(u==null?void 0:u.message)||"Request failed"}finally{G.value=!1}}async function ke(l){confirm(`Delete unit #${l.id}?`)&&(await A.remove(l.id),await B())}async function qe(){const l=await $e.list();W.value=l.map(s=>({id:s.id,name:s.name,email:s.email}));const e=await Ie.list();X.value=e.map(s=>({id:s.id,name:s.name,email:s.email}))}return Ve(async()=>{await Promise.all([B(),qe()])}),(l,e)=>(n(),Ae(Le,null,{default:h(()=>[t("div",Re,[t("div",{class:"flex items-center justify-between"},[e[22]||(e[22]=t("h2",{class:"text-2xl font-bold text-dash-title"},"Units",-1)),t("button",{onClick:xe,class:"bg-black text-white px-3 py-2 rounded hover:bg-gray-700"}," + Add Unit ")]),t("div",Fe,[t("div",Ge,[g(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>p.q=s),type:"text",placeholder:"Search by name or locationâ€¦",class:"form-input"},null,512),[[y,p.q,void 0,{trim:!0}]]),g(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>p.status=s),class:"form-input"},e[23]||(e[23]=[t("option",{value:""},"All statuses",-1),t("option",{value:"under_construction"},"under_construction",-1),t("option",{value:"completed"},"completed",-1)]),512),[[M,p.status]]),g(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>p.from=s),type:"date",class:"form-input"},null,512),[[y,p.from]]),g(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>p.to=s),type:"date",class:"form-input"},null,512),[[y,p.to]])])]),t("div",Oe,[t("table",ze,[e[26]||(e[26]=t("thead",{class:"bg-gray-50 text-gray-600"},[t("tr",null,[t("th",{class:"px-4 py-2 text-left"},"ID"),t("th",{class:"px-4 py-2 text-left"},"Name (EN / AR)"),t("th",{class:"px-4 py-2 text-left"},"Location"),t("th",{class:"px-4 py-2 text-left"},"Period"),t("th",{class:"px-4 py-2 text-left"},"Status"),t("th",{class:"px-4 py-2 text-left"},"Actions")])],-1)),t("tbody",null,[R.value?(n(),r("tr",Be,e[24]||(e[24]=[t("td",{colspan:"6",class:"px-4 py-6 text-center text-gray-500"},"Loadingâ€¦",-1)]))):c("",!0),(n(!0),r(L,null,S(ae.value,s=>(n(),r("tr",{key:s.id,class:"border-t"},[t("td",Te,"#"+o(s.id),1),t("td",Ke,[t("div",He,o(s.name_en||"â€”"),1),t("div",Je,o(s.name_ar),1)]),t("td",Qe,[t("div",We,o(s.location||"â€”"),1),s.lat&&s.long?(n(),r("div",Xe,"("+o(s.lat)+", "+o(s.long)+")",1)):c("",!0)]),t("td",Ye,[t("div",null,o(s.start_date||"â€”")+" â†’ "+o(s.end_date||"â€”"),1)]),t("td",Ze,[t("span",et,o(s.status||"â€”"),1)]),t("td",tt,[t("a",{href:me(s.id),target:"_blank",rel:"noopener noreferrer",class:"px-2 py-1.5 border rounded hover:bg-gray-50"}," Details ",8,st),t("button",{class:"px-2 py-1.5 border rounded hover:bg-gray-50",onClick:u=>fe(s)},"Edit",8,lt),t("button",{class:"px-2 py-1.5 border rounded text-red-600 hover:bg-red-50",onClick:u=>ke(s)}," Delete ",8,at)])]))),128)),!R.value&&!N.value.length?(n(),r("tr",nt,e[25]||(e[25]=[t("td",{colspan:"6",class:"px-4 py-8 text-center text-gray-500"},"No units found.",-1)]))):c("",!0)])]),t("div",ot,[t("div",rt,[e[27]||(e[27]=_(" Showing ")),t("strong",null,o(z.value+1),1),e[28]||(e[28]=_("â€“")),t("strong",null,o(J.value),1),e[29]||(e[29]=_(" of ")),t("strong",null,o(N.value.length),1)]),t("div",it,[t("button",{class:"px-3 py-1.5 border rounded disabled:opacity-50",disabled:U.value===1,onClick:e[4]||(e[4]=s=>U.value--)}," Prev ",8,dt),t("span",ut,"Page "+o(U.value),1),t("button",{class:"px-3 py-1.5 border rounded disabled:opacity-50",disabled:U.value*j.value>=N.value.length,onClick:e[5]||(e[5]=s=>U.value++)}," Next ",8,ct),g(t("select",{"onUpdate:modelValue":e[6]||(e[6]=s=>j.value=s),class:"form-input w-24"},e[30]||(e[30]=[t("option",{value:10},"10",-1),t("option",{value:20},"20",-1),t("option",{value:50},"50",-1)]),512),[[M,j.value,void 0,{number:!0}]])])])]),Q.value?(n(),r("div",vt,[t("div",{class:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:K}),t("div",pt,[t("div",mt,[t("div",{class:"sticky top-0 bg-gradient-to-r from-yellow-50 to-yellow-100 border-b px-6 py-4 rounded-t-2xl flex items-center justify-between"},[e[31]||(e[31]=t("h3",{class:"text-xl font-bold text-gray-800 flex items-center gap-2"}," Unit Details ",-1)),t("button",{onClick:K,class:"text-gray-500 hover:text-gray-800 hover:bg-gray-100 rounded-full p-2"}," âœ• ")]),T.loading?(n(),r("div",gt,"Loadingâ€¦")):(n(),r("div",xt,[t("div",ft,[v.value.cover_image_url?(n(),r("img",{key:0,src:v.value.cover_image_url,alt:"Unit Cover",class:"absolute inset-0 w-full h-full object-cover"},null,8,bt)):(n(),r("div",yt," No Cover Image ")),t("div",_t,[t("div",ht,o(v.value.name_en||"Unnamed Unit"),1),v.value.name_ar?(n(),r("div",wt,o(v.value.name_ar),1)):c("",!0)])]),t("div",kt,[t("div",qt,[e[32]||(e[32]=t("span",{class:"block text-gray-400 text-xs uppercase"},"Status",-1)),t("span",Ct,o(v.value.status||"â€”"),1)]),t("div",Ut,[e[33]||(e[33]=t("span",{class:"block text-gray-400 text-xs uppercase"},"Location",-1)),t("span",Dt,o(v.value.location||"â€”"),1)]),t("div",Vt,[e[34]||(e[34]=t("span",{class:"block text-gray-400 text-xs uppercase"},"Duration",-1)),t("span",At,o(v.value.start_date||"â€”")+" â†’ "+o(v.value.end_date||"â€”"),1)])]),t("div",jt,[e[35]||(e[35]=t("div",{class:"mb-2 text-gray-700 font-semibold text-base"},"Description (EN)",-1)),t("p",Pt,o(v.value.description_en||"â€”"),1),e[36]||(e[36]=t("div",{class:"mb-2 text-gray-700 font-semibold text-base"},"Description (AR)",-1)),t("p",Lt,o(v.value.description_ar||"â€”"),1)]),t("div",null,[e[37]||(e[37]=t("div",{class:"text-gray-800 font-semibold mb-3"},"Gallery",-1)),v.value.gallery&&v.value.gallery.length?(n(),r("div",St,[(n(!0),r(L,null,S(v.value.gallery,s=>(n(),r("div",{key:s.id,class:"aspect-[4/3] rounded-lg overflow-hidden bg-gray-100 border hover:shadow-md transition"},[t("img",{src:s.image_url,class:"w-full h-full object-cover"},null,8,Nt)]))),128))])):(n(),r("div",Et,"No images available."))]),t("div",$t,[w(q(C),{href:oe(v.value.id),class:"nav-btn"},{default:h(()=>e[38]||(e[38]=[_(" ðŸ“„ Docs ")])),_:1},8,["href"]),w(q(C),{href:re(v.value.id),class:"nav-btn"},{default:h(()=>e[39]||(e[39]=[_(" ðŸ–¼ï¸ Gallery ")])),_:1},8,["href"]),w(q(C),{href:ie(v.value.id),class:"nav-btn"},{default:h(()=>e[40]||(e[40]=[_(" âœï¸ Drawings ")])),_:1},8,["href"]),w(q(C),{href:de(v.value.id),class:"nav-btn"},{default:h(()=>e[41]||(e[41]=[_(" ðŸ“Š Reports ")])),_:1},8,["href"]),w(q(C),{href:ue(v.value.id),class:"nav-btn"},{default:h(()=>e[42]||(e[42]=[_(" ðŸ§© Phases ")])),_:1},8,["href"]),w(q(C),{href:ce(v.value.id),class:"nav-btn"},{default:h(()=>e[43]||(e[43]=[_(" ðŸ•’ Timeline ")])),_:1},8,["href"]),w(q(C),{href:ve(v.value.id),class:"nav-btn"},{default:h(()=>e[44]||(e[44]=[_(" ðŸ‘· Assignments ")])),_:1},8,["href"]),w(q(C),{href:pe(v.value.id),class:"nav-btn"},{default:h(()=>e[45]||(e[45]=[_(" ðŸ’° Payments & Installment ")])),_:1},8,["href"])]),t("div",{class:"sticky bottom-0 bg-white border-t pt-3 text-right"},[t("button",{onClick:K,class:"px-4 py-2 border rounded-lg hover:bg-gray-100 text-gray-700"}," Close ")])]))])])])):c("",!0),F.value?(n(),r("div",{key:1,class:"fixed inset-0 z-50",onKeydown:je($,["esc"])},[t("div",{class:"absolute inset-0 bg-black/40 back-drop",onClick:$,"aria-hidden":"true"}),t("div",It,[t("div",Mt,[t("div",Rt,[t("div",Ft,[t("h3",Gt,o(d.value?"Edit Unit":"Add Unit"),1),t("button",{onClick:$,class:"text-gray-400 hover:text-gray-600","aria-label":"Close"},"âœ•")])]),t("div",Ot,[t("form",{onSubmit:Pe(ee,["prevent"]),class:"space-y-4"},[t("div",zt,[t("div",null,[e[46]||(e[46]=t("label",{class:"block text-xs text-gray-500 mb-1"},"Name (EN)*",-1)),g(t("input",{class:b(f("name.en")),"onUpdate:modelValue":e[7]||(e[7]=s=>a.value.name.en=s),type:"text",required:!d.value},null,10,Bt),[[y,a.value.name.en]]),i("name.en")?(n(),r("p",Tt,o(i("name.en")),1)):c("",!0)]),t("div",null,[e[47]||(e[47]=t("label",{class:"block text-xs text-gray-500 mb-1"},"Name (AR)*",-1)),g(t("input",{class:b(f("name.ar")),"onUpdate:modelValue":e[8]||(e[8]=s=>a.value.name.ar=s),type:"text",required:!d.value},null,10,Kt),[[y,a.value.name.ar]]),i("name.ar")?(n(),r("p",Ht,o(i("name.ar")),1)):c("",!0)]),t("div",Jt,[e[48]||(e[48]=t("label",{class:"block text-xs text-gray-500 mb-1"},"Description (EN)*",-1)),g(t("textarea",{class:b(f("description.en")),"onUpdate:modelValue":e[9]||(e[9]=s=>a.value.description.en=s),required:!d.value},null,10,Qt),[[y,a.value.description.en]]),i("description.en")?(n(),r("p",Wt,o(i("description.en")),1)):c("",!0)]),t("div",Xt,[e[49]||(e[49]=t("label",{class:"block text-xs text-gray-500 mb-1"},"Description (AR)*",-1)),g(t("textarea",{class:b(f("description.ar")),"onUpdate:modelValue":e[10]||(e[10]=s=>a.value.description.ar=s),required:!d.value},null,10,Yt),[[y,a.value.description.ar]]),i("description.ar")?(n(),r("p",Zt,o(i("description.ar")),1)):c("",!0)])]),t("div",es,[t("div",ts,[w(Se,{label:"Pick on map",lat:a.value.lat,"onUpdate:lat":e[11]||(e[11]=s=>a.value.lat=s),lng:a.value.long,"onUpdate:lng":e[12]||(e[12]=s=>a.value.long=s),address:a.value.location,"onUpdate:address":e[13]||(e[13]=s=>a.value.location=s)},null,8,["lat","lng","address"])]),t("div",null,[e[50]||(e[50]=t("label",{class:"block text-xs text-gray-500 mb-1"},"Location*",-1)),g(t("input",{class:b(f("location")),"onUpdate:modelValue":e[14]||(e[14]=s=>a.value.location=s),type:"text",required:!d.value,disabled:""},null,10,ss),[[y,a.value.location]]),i("location")?(n(),r("p",ls,o(i("location")),1)):c("",!0)]),t("div",null,[e[51]||(e[51]=t("label",{class:"block text-xs text-gray-500 mb-1"},"Latitude (-90..90)*",-1)),g(t("input",{class:b(f("lat")),"onUpdate:modelValue":e[15]||(e[15]=s=>a.value.lat=s),type:"number",step:"any",min:"-90",max:"90",required:!d.value,disabled:""},null,10,as),[[y,a.value.lat,void 0,{number:!0}]]),i("lat")?(n(),r("p",ns,o(i("lat")),1)):c("",!0)]),t("div",null,[e[52]||(e[52]=t("label",{class:"block text-xs text-gray-500 mb-1"},"Longitude (-180..180)*",-1)),g(t("input",{class:b(f("long")),"onUpdate:modelValue":e[16]||(e[16]=s=>a.value.long=s),type:"number",step:"any",min:"-180",max:"180",required:!d.value,disabled:""},null,10,os),[[y,a.value.long,void 0,{number:!0}]]),i("long")?(n(),r("p",rs,o(i("long")),1)):c("",!0)]),t("div",null,[e[53]||(e[53]=t("label",{class:"block text-xs text-gray-500 mb-1"},"Start Date*",-1)),g(t("input",{class:b(f("start_date")),"onUpdate:modelValue":e[17]||(e[17]=s=>a.value.start_date=s),type:"date",required:!d.value},null,10,is),[[y,a.value.start_date]]),i("start_date")?(n(),r("p",ds,o(i("start_date")),1)):c("",!0)]),t("div",null,[e[54]||(e[54]=t("label",{class:"block text-xs text-gray-500 mb-1"},"End Date*",-1)),g(t("input",{class:b(f("end_date")),"onUpdate:modelValue":e[18]||(e[18]=s=>a.value.end_date=s),type:"date",required:!d.value},null,10,us),[[y,a.value.end_date]]),i("end_date")?(n(),r("p",cs,o(i("end_date")),1)):c("",!0)])]),t("div",vs,[t("div",null,[e[56]||(e[56]=t("label",{class:"block text-xs text-gray-500 mb-1"},"User *",-1)),g(t("select",{class:b(f("user_id")),"onUpdate:modelValue":e[19]||(e[19]=s=>a.value.user_id=s),required:!d.value},[e[55]||(e[55]=t("option",{value:"",disabled:""},"Select a user",-1)),(n(!0),r(L,null,S(W.value,s=>(n(),r("option",{key:s.id,value:s.id},o(s.name)+" â€” "+o(s.email),9,ms))),128))],10,ps),[[M,a.value.user_id,void 0,{number:!0}]]),i("user_id")?(n(),r("p",gs,o(i("user_id")),1)):c("",!0)]),t("div",null,[e[58]||(e[58]=t("label",{class:"block text-xs text-gray-500 mb-1"},"Project Manager *",-1)),g(t("select",{class:b(f("vendor_id")),"onUpdate:modelValue":e[20]||(e[20]=s=>a.value.vendor_id=s),required:!d.value},[e[57]||(e[57]=t("option",{value:"",disabled:""},"Select a Project Manager",-1)),(n(!0),r(L,null,S(X.value,s=>(n(),r("option",{key:s.id,value:s.id},o(s.name)+" â€” "+o(s.email),9,fs))),128))],10,xs),[[M,a.value.vendor_id,void 0,{number:!0}]]),i("vendor_id")?(n(),r("p",bs,o(i("vendor_id")),1)):c("",!0)]),t("div",null,[e[60]||(e[60]=t("label",{class:"block text-xs text-gray-500 mb-1"},"Status",-1)),g(t("select",{class:"form-input","onUpdate:modelValue":e[21]||(e[21]=s=>a.value.status=s)},e[59]||(e[59]=[t("option",{value:"under_construction",selected:""},"under_construction",-1),t("option",{value:"completed"},"completed",-1)]),512),[[M,a.value.status]])])]),t("div",ys,[t("div",null,[t("label",_s," Cover Image* "+o(d.value?"(optional to replace)":""),1),t("input",{class:b(f("cover_image")),type:"file",accept:"image/*",onChange:be,required:!d.value},null,42,hs),i("cover_image")?(n(),r("p",ws,o(i("cover_image")),1)):c("",!0),V.value?(n(),r("div",ks,[t("img",{src:V.value,class:"w-40 h-28 object-cover rounded border"},null,8,qs),t("button",{type:"button",class:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center shadow hover:bg-red-600",onClick:_e}," âœ• ")])):c("",!0)]),t("div",null,[e[61]||(e[61]=t("label",{class:"block text-xs text-gray-500 mb-1"},"Gallery* (multiple on create)",-1)),t("input",{class:b(f("gallery")),type:"file",accept:"image/*",multiple:"",onChange:ye,required:!d.value},null,42,Cs),i("gallery")?(n(),r("p",Us,o(i("gallery")),1)):c("",!0),P.value.length?(n(),r("div",Ds,[(n(!0),r(L,null,S(P.value,s=>(n(),r("div",{key:s.id,class:"relative inline-block"},[t("img",{src:s.image_url,class:"w-24 h-16 object-cover rounded border"},null,8,Vs),t("button",{type:"button",class:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center shadow hover:bg-red-600",onClick:u=>he(s.id)}," âœ• ",8,As)]))),128))])):c("",!0),E.value.length?(n(),r("div",js,[(n(!0),r(L,null,S(E.value,(s,u)=>(n(),r("div",{key:u,class:"relative inline-block"},[t("img",{src:s,class:"w-24 h-16 object-cover rounded border"},null,8,Ps),t("button",{type:"button",class:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center shadow hover:bg-red-600",onClick:O=>E.value.splice(u,1)}," âœ• ",8,Ls)]))),128))])):c("",!0)])]),D.value?(n(),r("div",Ss,o(D.value),1)):c("",!0)],32)]),t("div",Ns,[t("div",Es,[t("button",{disabled:G.value,class:"px-4 py-2 bg-green-600 text-white rounded disabled:opacity-60",onClick:ee},o(G.value?"Savingâ€¦":d.value?"Update":"Create"),9,$s),t("button",{type:"button",class:"px-3 py-2 border rounded",onClick:$},"Cancel")])])])])],32)):c("",!0)])]),_:1}))}},Ks=Me(Is,[["__scopeId","data-v-fc38fb7d"]]);export{Ks as default};
