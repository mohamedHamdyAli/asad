import{p as v,r as C,f as r,o as u,a as _,u as S,g as j,w as E,b as o,h as d,j as y,y as L,t as i,k as x,F,m as U}from"./app-D7aY2hN6.js";import{_ as O}from"./AuthenticatedLayout-DqIekq8g.js";import{M as P}from"./MapPicker-BhMaBAQF.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";const I={class:"p-6 space-y-6 max-w-4xl"},T={key:0,class:"text-sm text-gray-500"},q={key:1,class:"bg-white p-6 rounded-2xl shadow-sm border space-y-6"},D={key:0,class:"text-red-600 text-xs"},K={key:0,class:"text-red-600 text-xs"},z={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},G={key:0,class:"text-red-600 text-xs"},H={key:0,class:"text-red-600 text-xs"},J={key:0,class:"text-red-600 text-xs"},Q={key:0,class:"text-red-600 text-xs"},R={key:0,class:"text-red-600 text-xs"},W={class:"space-y-2"},X={class:"grid grid-cols-2 gap-3"},Y=["value"],Z=["value"],h={key:0,class:"text-red-600 text-xs"},tt={class:"flex justify-end"},et=["disabled"],nt={key:0,class:"p-3 bg-green-100 text-green-700 border rounded"},ot={key:1,class:"p-3 bg-red-100 text-red-700 border rounded"},st={__name:"ContactUsPage",setup(lt){const B=v(!1),b=v(!1),f=v(""),c=v(""),m=C({}),n=C({id:null,country:"",telephone:"",account_name:"",bank_name:"",iban:"",currency:"",swift_code:"",location:"",lat:"",long:""});async function V(){var a;if(w(),N(),!!n.country)try{const{data:t}=await U.get(`/api/contact-infos?country=${n.country}`),e=((a=t.data)==null?void 0:a.find(g=>{var s;return((s=g.country)==null?void 0:s.toLowerCase())===n.country.toLowerCase()}))||null;if(!e){k(),n.country=n.country,c.value="No contact info found for this country.";return}if(Object.assign(n,{id:e.id,country:n.country,telephone:e.telephone,account_name:e.account_name,bank_name:e.bank_name,iban:e.iban,currency:e.currency,swift_code:e.swift_code,location:e.location,lat:e.lat,long:e.long}),!e){k(),n.id=null,n.country=n.country,c.value="No contact info found for this country.";return}}catch(t){console.error(t),k(),n.country=n.country}}function p(a){n[a]?delete m[a]:m[a]=`${a.replace("_"," ")} is required`}function $(){return["country","telephone","account_name","bank_name","iban","currency","swift_code","location"].forEach(p),Object.keys(m).length===0}async function M(){var a,t,e,g;if(w(),!$()){c.value="Please fill in all required fields.";return}if(!n.id){c.value="No record selected to update.";return}b.value=!0;try{const{data:s}=await U.post(`/api/contact-infos/update/${n.id}`,n);if((s==null?void 0:s.code)===422||(s==null?void 0:s.key)==="Invalid data sent"){c.value=s.msg||"Validation error";return}f.value="Saved successfully!"}catch(s){c.value=((t=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:t.msg)||((g=(e=s==null?void 0:s.response)==null?void 0:e.data)==null?void 0:g.message)||"Save failed. Try again."}finally{b.value=!1}}function k(){Object.assign(n,{telephone:"",account_name:"",bank_name:"",iban:"",currency:"",swift_code:"",location:"",lat:"",long:""})}function w(){f.value="",c.value=""}function N(){Object.keys(m).forEach(a=>delete m[a])}function l(a){return m[a]||""}return(a,t)=>(u(),r(F,null,[_(S(j),{title:"Contact Us Management"}),_(O,null,{default:E(()=>[o("div",I,[t[27]||(t[27]=o("h2",{class:"text-2xl font-semibold text-dash-title"}," Contact Us Management ",-1)),B.value?(u(),r("div",T," Loading… ")):(u(),r("div",q,[o("div",null,[t[17]||(t[17]=o("label",{class:"block text-xs text-gray-500 mb-1"},"Country",-1)),y(o("select",{class:"form-input","onUpdate:modelValue":t[0]||(t[0]=e=>n.country=e),onChange:V},t[16]||(t[16]=[o("option",{value:""},"—",-1),o("option",{value:"Egypt"},"Egypt",-1),o("option",{value:"Kuwait"},"Kuwait",-1)]),544),[[L,n.country]]),l("country")?(u(),r("p",D,i(l("country")),1)):d("",!0)]),o("div",null,[t[18]||(t[18]=o("label",{class:"block text-xs text-gray-500 mb-1"},"Telephone",-1)),y(o("input",{class:"form-input","onUpdate:modelValue":t[1]||(t[1]=e=>n.telephone=e),onBlur:t[2]||(t[2]=e=>p("telephone"))},null,544),[[x,n.telephone]]),l("telephone")?(u(),r("p",K,i(l("telephone")),1)):d("",!0)]),o("div",z,[o("div",null,[t[19]||(t[19]=o("label",{class:"block text-xs text-gray-500 mb-1"},"Account Name",-1)),y(o("input",{class:"form-input","onUpdate:modelValue":t[3]||(t[3]=e=>n.account_name=e),onBlur:t[4]||(t[4]=e=>p("account_name"))},null,544),[[x,n.account_name]]),l("account_name")?(u(),r("p",G,i(l("account_name")),1)):d("",!0)]),o("div",null,[t[20]||(t[20]=o("label",{class:"block text-xs text-gray-500 mb-1"},"Bank Name",-1)),y(o("input",{class:"form-input","onUpdate:modelValue":t[5]||(t[5]=e=>n.bank_name=e),onBlur:t[6]||(t[6]=e=>p("bank_name"))},null,544),[[x,n.bank_name]]),l("bank_name")?(u(),r("p",H,i(l("bank_name")),1)):d("",!0)]),o("div",null,[t[21]||(t[21]=o("label",{class:"block text-xs text-gray-500 mb-1"},"IBAN",-1)),y(o("input",{class:"form-input","onUpdate:modelValue":t[7]||(t[7]=e=>n.iban=e),onBlur:t[8]||(t[8]=e=>p("iban"))},null,544),[[x,n.iban]]),l("iban")?(u(),r("p",J,i(l("iban")),1)):d("",!0)]),o("div",null,[t[22]||(t[22]=o("label",{class:"block text-xs text-gray-500 mb-1"},"Currency",-1)),y(o("input",{class:"form-input","onUpdate:modelValue":t[9]||(t[9]=e=>n.currency=e),onBlur:t[10]||(t[10]=e=>p("currency"))},null,544),[[x,n.currency]]),l("currency")?(u(),r("p",Q,i(l("currency")),1)):d("",!0)]),o("div",null,[t[23]||(t[23]=o("label",{class:"block text-xs text-gray-500 mb-1"},"Swift Code",-1)),y(o("input",{class:"form-input","onUpdate:modelValue":t[11]||(t[11]=e=>n.swift_code=e),onBlur:t[12]||(t[12]=e=>p("swift_code"))},null,544),[[x,n.swift_code]]),l("swift_code")?(u(),r("p",R,i(l("swift_code")),1)):d("",!0)])]),o("div",W,[t[26]||(t[26]=o("label",{class:"block text-xs text-gray-500 mb-1"},"Location",-1)),_(P,{lat:n.lat,lng:n.long,address:n.location,"onUpdate:lat":t[13]||(t[13]=e=>n.lat=e),"onUpdate:lng":t[14]||(t[14]=e=>n.long=e),"onUpdate:address":t[15]||(t[15]=e=>n.location=e)},null,8,["lat","lng","address"]),o("div",X,[o("div",null,[t[24]||(t[24]=o("label",{class:"block text-xs text-gray-500 mb-1"},"Latitude",-1)),o("input",{class:"form-input bg-gray-100 cursor-not-allowed",value:n.lat,disabled:""},null,8,Y)]),o("div",null,[t[25]||(t[25]=o("label",{class:"block text-xs text-gray-500 mb-1"},"Longitude",-1)),o("input",{class:"form-input bg-gray-100 cursor-not-allowed",value:n.long,disabled:""},null,8,Z)])]),l("location")?(u(),r("p",h,i(l("location")),1)):d("",!0)]),o("div",tt,[o("button",{class:"px-4 py-2 bg-green-600 text-white rounded disabled:opacity-50",disabled:b.value,onClick:M},i(b.value?"Saving…":"Save"),9,et)]),f.value?(u(),r("div",nt,i(f.value),1)):d("",!0),c.value?(u(),r("div",ot,i(c.value),1)):d("",!0)]))])]),_:1})],64))}},dt=A(st,[["__scopeId","data-v-1446a169"]]);export{dt as default};
