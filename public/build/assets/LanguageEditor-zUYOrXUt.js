import{p as o,i as S,q as E,z as F,f as s,o as l,a as v,u as T,g as V,w as j,b as t,t as p,F as m,s as B,j as M,k as N}from"./app-CM7C29Wl.js";import{_ as U}from"./AuthenticatedLayout-BngBMlym.js";import{h as _}from"./http-CEVbEs6e.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const $={class:"p-6 space-y-6"},z={key:0,class:"p-3 bg-red-50 text-red-600 rounded"},C={key:1,class:"text-sm text-gray-500"},D={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},O={class:"block text-sm font-medium text-gray-600 mb-1"},q=["onUpdate:modelValue"],A={class:"text-right pt-4"},Z=["disabled"],K={__name:"LanguageEditor",props:{id:[Number,String],type:String},setup(h){const g=h;function y(){const e=window.location.pathname.match(/\/language\/editor\/(\d+)\/([A-Za-z_]+)/);return e?{id:e[1],type:e[2]}:{id:null,type:"all"}}const b=y(),i=g.id??b.id,n=o({}),r=o(!1),d=o(!1),u=o(""),x=o(!1),w=S(()=>Object.keys(n.value??{}));async function f(){var e;if(!i){u.value="Missing language id.";return}r.value=!0;try{const{data:a}=await _.get(`/language/languageedit/${i}/all`);n.value=((e=a==null?void 0:a.data)==null?void 0:e.enLabels)||{}}catch{u.value="Failed to load language data."}finally{r.value=!1}}async function k(){if(i){d.value=!0;try{await _.post(`/language/updatelanguageValues/${i}/all`,{values:n.value}),alert("Translations updated successfully.")}catch{alert("Save failed")}finally{d.value=!1}}}return E(f),F(()=>[g.id,g.type],()=>{x.value=!1,f()}),(e,a)=>(l(),s(m,null,[v(T(V),{title:"Language Editor"}),v(U,null,{default:j(()=>[t("div",$,[a[0]||(a[0]=t("div",{class:"flex justify-between items-center"},[t("h2",{class:"text-2xl font-semibold text-white"},"Translate Language File")],-1)),u.value?(l(),s("div",z,p(u.value),1)):r.value?(l(),s("div",C,"Loading…")):(l(),s("div",D,[(l(!0),s(m,null,B(w.value,c=>(l(),s("div",{key:c},[t("label",O,p(c),1),M(t("input",{"onUpdate:modelValue":L=>n.value[c]=L,type:"text",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter translation"},null,8,q),[[N,n.value[c]]])]))),128))])),t("div",A,[t("button",{disabled:d.value||r.value,onClick:k,class:"bg-green-600 text-white px-6 py-2 rounded hover:bg-green-700 disabled:opacity-50"},p(d.value?"Saving…":"Save"),9,Z)])])]),_:1})],64))}};export{K as default};
