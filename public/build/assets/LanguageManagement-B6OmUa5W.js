import{l as _,p as O,c as z,o as d,w as $,b as t,j as x,f as u,h as m,s as L,t as r,y as G,e as y,v as P,F as H,q as J,a as b,u as w,S}from"./app-CxFHgvHx.js";import{I as j,_ as K}from"./AuthenticatedLayout-2uYMA9Qa.js";import{h as p}from"./http-CTfLkh2s.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const A={list:(n={})=>p.get("/api/language/list",{params:n}),create:n=>p.post("/api/language/create",n),show:n=>p.get(`/api/language/${n}`),update:(n,c)=>p.post(`/api/language/${n}`,c),remove:n=>p.delete(`/api/language/delete/${n}`),setUI:n=>p.post(`/api/set-language/${n}`),getFile:(n,c)=>p.get(`/api/language/languageedit/${n}/${c}`),saveFile:(n,c,v)=>p.post(`/api/language/updatelanguageValues/${n}/${c}`,{values:v})},W={class:"p-6"},X={class:"flex flex-col lg:flex-row gap-6 items-start"},Y={class:"w-full lg:w-1/4"},Z={class:"bg-white rounded-xl shadow-lg p-6"},ee={class:"grid gap-3 mb-4"},te={key:0,class:"text-xs text-red-600 mt-1"},ae={key:0,class:"text-xs text-red-600 mt-1"},oe={key:0,class:"text-xs text-red-600 mt-1"},se={key:0,class:"text-xs text-red-600 mt-1"},ne={key:0,class:"text-xs text-red-600 mt-1"},le={key:0,class:"text-xs text-red-600 mt-1"},ie={class:"flex items-center gap-2 text-sm text-gray-600"},de=["disabled"],re={class:"w-full lg:w-3/4"},ue={class:"bg-white shadow rounded-lg p-4 h-[600px] overflow-y-auto"},ce={class:"font-bold text-gray-800"},pe={class:"text-sm text-gray-500"},ge={class:"text-sm text-gray-500"},me={class:"Lang-image"},ve=["src","alt"],fe={class:"flex gap-3 items-center"},xe={class:"relative"},he=["onClick"],_e={key:0,class:"absolute z-[100] mt-2 w-48 bg-white border rounded shadow -left-24"},ye=["onClick"],be={__name:"LanguageManagement",setup(n){const c=_([]),v=_({}),k=_(!1),s=_({name:"",name_en:"",code:"",country_code:"",scope:"",rtl:!1,icon:null}),h=_({}),i=o=>{var e;return(e=h.value)!=null&&e[o]?h.value[o]:""};function E(o){var e;s.value.icon=((e=o.target.files)==null?void 0:e[0])||null}function I(){const o={};return s.value.name||(o.name="Language name is required."),s.value.code?s.value.code.length>10&&(o.code="Code must be ≤ 10 characters."):o.code="Code is required.",s.value.scope||(o.scope="Scope is required."),s.value.country_code&&s.value.country_code.length>5&&(o.country_code="Country code must be ≤ 5 characters."),h.value=o,Object.keys(o).length===0}async function V(){const{data:o}=await A.list();c.value=o.data||[]}O(V);async function D(){var o,e,a,g;if(I()){k.value=!0;try{const l=new FormData;l.append("name",s.value.name),l.append("name_en",s.value.english_name||""),l.append("code",s.value.code),l.append("country_code",s.value.country_code||""),l.append("scope",s.value.scope||""),l.append("rtl",s.value.rtl?1:0),s.value.icon&&l.append("icon",s.value.icon),await A.create(l),q(),await V()}catch(l){const f=(e=(o=l==null?void 0:l.response)==null?void 0:o.data)==null?void 0:e.errors;if(f&&typeof f=="object"){const N={};Object.keys(f).forEach(C=>{N[C]=Array.isArray(f[C])?f[C][0]:String(f[C])}),h.value=N}else alert(((g=(a=l==null?void 0:l.response)==null?void 0:a.data)==null?void 0:g.message)||"Create failed")}finally{k.value=!1}}}function q(){s.value={name:"",english_name:"",code:"",country_code:"",scope:"",rtl:!1,icon:null},h.value={}}function B(o){v.value[o]=!v.value[o]}function M(o){v.value[o]=!1}function U(o,e){return`/language/editor/${o}/${e}`}async function R(o){confirm(`Delete ${o.name}?`)&&(await A.remove(o.id),await V())}const F=["https://flagcdn.com/w320/us.png","https://flagcdn.com/w320/fr.png","https://flagcdn.com/w320/de.png","https://flagcdn.com/w320/eg.png","https://flagcdn.com/w320/jp.png"];function T(o){const e=Math.floor(Math.random()*F.length);o.target.src=F[e]}return(o,e)=>(d(),z(K,null,{default:$(()=>[t("div",W,[e[13]||(e[13]=t("h2",{class:"text-2xl font-semibold text-gray-800 mb-6"},"Language Management",-1)),t("div",X,[t("div",Y,[t("div",Z,[e[8]||(e[8]=t("h3",{class:"text-xl font-bold text-gray-800 mb-6"},"Add New Language",-1)),t("div",ee,[t("div",null,[x(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>s.value.name=a),type:"text",placeholder:"Language Name",class:"form-input"},null,512),[[L,s.value.name,void 0,{trim:!0}]]),i("name")?(d(),u("p",te,r(i("name")),1)):m("",!0)]),t("div",null,[x(t("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>s.value.english_name=a),type:"text",placeholder:"Language Name (English)",class:"form-input"},null,512),[[L,s.value.english_name,void 0,{trim:!0}]]),i("english_name")?(d(),u("p",ae,r(i("english_name")),1)):m("",!0)]),t("div",null,[x(t("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>s.value.code=a),type:"text",placeholder:"Code (e.g., ar, en)",class:"form-input"},null,512),[[L,s.value.code,void 0,{trim:!0}]]),i("code")?(d(),u("p",oe,r(i("code")),1)):m("",!0)]),t("div",null,[x(t("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>s.value.country_code=a),type:"text",placeholder:"Country Code (e.g., EG, US)",class:"form-input"},null,512),[[L,s.value.country_code,void 0,{trim:!0}]]),i("country_code")?(d(),u("p",se,r(i("country_code")),1)):m("",!0)]),t("div",null,[t("input",{type:"file",accept:"image/*",class:"form-input",onChange:E},null,32),i("icon")?(d(),u("p",ne,r(i("icon")),1)):m("",!0)]),t("div",null,[x(t("select",{"onUpdate:modelValue":e[4]||(e[4]=a=>s.value.scope=a),class:"form-input"},e[6]||(e[6]=[t("option",{disabled:"",value:""},"Select Scope",-1),t("option",{value:"user"},"User",-1),t("option",{value:"vendor"},"Vendor",-1),t("option",{value:"admin"},"Admin",-1)]),512),[[G,s.value.scope]]),i("scope")?(d(),u("p",le,r(i("scope")),1)):m("",!0)]),t("label",ie,[x(t("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>s.value.rtl=a),type:"checkbox"},null,512),[[P,s.value.rtl]]),e[7]||(e[7]=y(" RTL (Right to Left) "))]),t("button",{disabled:k.value,onClick:D,class:"bg-gray-800 text-white px-3 py-2 rounded hover:bg-gray-700 disabled:opacity-50"},r(k.value?"Saving…":"+ Add New Language"),9,de)])])]),t("div",re,[t("div",ue,[e[12]||(e[12]=t("h3",{class:"text-lg font-semibold mb-4"},"Languages",-1)),(d(!0),u(H,null,J(c.value,a=>(d(),u("div",{key:a.id,class:"border-b py-3 px-2 flex justify-between items-center"},[t("div",null,[t("div",ce,[y(r(a.name)+" ",1),t("span",pe,"("+r(a.scope)+")",1)]),t("div",ge,"Code: "+r(a.code),1)]),t("div",me,[t("img",{src:a.icon_url||`/images/flags/${a.code}.png`,alt:a.name,class:"w-8 h-6 object-cover",onError:T},null,40,ve)]),t("div",fe,[t("div",xe,[t("button",{onClick:g=>B(a.id),title:"Edit",class:"text-blue-600 hover:text-blue-800"},[b(w(j),{icon:"mdi:pencil-outline",class:"w-5 h-5"})],8,he),v.value[a.id]?(d(),u("div",_e,[b(w(S),{class:"block px-4 py-2 text-sm hover:bg-gray-100",href:U(a.id,"panel"),onClick:g=>M(a.id)},{default:$(()=>e[9]||(e[9]=[y(" Panel translation ")])),_:2},1032,["href","onClick"]),b(w(S),{class:"block px-4 py-2 text-sm hover:bg-gray-100",href:U(a.id,"vendor"),onClick:g=>M(a.id)},{default:$(()=>e[10]||(e[10]=[y(" Vendor App translation ")])),_:2},1032,["href","onClick"]),b(w(S),{class:"block px-4 py-2 text-sm hover:bg-gray-100",href:U(a.id,"app"),onClick:g=>M(a.id)},{default:$(()=>e[11]||(e[11]=[y(" User App translation ")])),_:2},1032,["href","onClick"])])):m("",!0)]),t("button",{onClick:g=>R(a),title:"Delete",class:"text-red-600 hover:text-red-800"},[b(w(j),{icon:"mdi:trash-can-outline",class:"w-5 h-5"})],8,ye)])]))),128))])])])])]),_:1}))}},Le=Q(be,[["__scopeId","data-v-8683ad69"]]);export{Le as default};
