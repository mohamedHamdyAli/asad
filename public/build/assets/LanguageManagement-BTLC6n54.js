import{p as h,q as O,f as d,o as u,a as x,u as k,g as z,w as E,b as t,j as y,h as v,k as C,t as r,e as F,v as G,F as N,s as H,S as J}from"./app-JYR8DZsF.js";import{I as U,_ as K}from"./AuthenticatedLayout-4E8zXejd.js";import{h as g}from"./http-5q0O3zmB.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";const $={list:(s={})=>g.get("/api/language/list",{params:s}),create:s=>g.post("/api/language/create",s),show:s=>g.get(`/api/language/${s}`),update:(s,c)=>g.post(`/api/language/${s}`,c),remove:s=>g.delete(`/api/language/delete/${s}`),setUI:s=>g.post(`/api/set-language/${s}`),getFile:(s,c)=>g.get(`/api/language/languageedit/${s}/${c}`),saveFile:(s,c,p)=>g.post(`/api/language/updatelanguageValues/${s}/${c}`,{values:p})},Q={class:"p-6"},W={class:"flex flex-col lg:flex-row gap-6 items-start"},X={class:"w-full lg:w-1/4"},Y={class:"bg-white rounded-xl shadow-lg p-6"},Z={class:"grid gap-3 mb-4"},ee={key:0,class:"text-xs text-red-600 mt-1"},te={key:0,class:"text-xs text-red-600 mt-1"},ae={key:0,class:"text-xs text-red-600 mt-1"},ne={key:0,class:"text-xs text-red-600 mt-1"},oe={key:0,class:"text-xs text-red-600 mt-1"},se={class:"flex items-center gap-2 text-sm text-gray-600"},le=["disabled"],ie={class:"w-full lg:w-3/4"},de={class:"bg-white shadow rounded-lg p-4 h-[600px] overflow-y-auto"},ue={class:"font-bold text-gray-800"},ce={class:"text-sm text-gray-500"},re={class:"Lang-image"},ge=["src","alt"],pe={class:"flex gap-3 items-center"},me={class:"relative"},ve=["onClick"],fe={key:0,class:"absolute z-[100] mt-2 w-48 bg-white border rounded shadow -left-24"},_e=["onClick"],he={__name:"LanguageManagement",setup(s){const c=h([]),p=h({}),b=h(!1),n=h({name:"",name_en:"",code:"",country_code:"",rtl:!1,icon:null}),f=h({}),i=a=>{var e;return(e=f.value)!=null&&e[a]?f.value[a]:""};function j(a){var e;n.value.icon=((e=a.target.files)==null?void 0:e[0])||null}function I(){const a={};return n.value.name||(a.name="Language name is required."),n.value.code?n.value.code.length>10&&(a.code="Code must be ≤ 10 characters."):a.code="Code is required.",n.value.country_code&&n.value.country_code.length>5&&(a.country_code="Country code must be ≤ 5 characters."),f.value=a,Object.keys(a).length===0}async function L(){const{data:a}=await $.list();c.value=a.data||[]}O(L);async function S(){var a,e,o,_;if(I()){b.value=!0;try{const l=new FormData;l.append("name",n.value.name),l.append("name_en",n.value.english_name||""),l.append("code",n.value.code),l.append("country_code",n.value.country_code||""),l.append("app_scope","all"),l.append("rtl",n.value.rtl?1:0),n.value.icon&&l.append("icon",n.value.icon),await $.create(l),A(),await L()}catch(l){const m=(e=(a=l==null?void 0:l.response)==null?void 0:a.data)==null?void 0:e.errors;if(m&&typeof m=="object"){const V={};Object.keys(m).forEach(w=>{V[w]=Array.isArray(m[w])?m[w][0]:String(m[w])}),f.value=V}else alert(((_=(o=l==null?void 0:l.response)==null?void 0:o.data)==null?void 0:_.message)||"Create failed")}finally{b.value=!1}}}function A(){n.value={name:"",english_name:"",code:"",country_code:"",scope:"",rtl:!1,icon:null},f.value={}}function D(a){p.value[a]=!p.value[a]}function R(a){p.value[a]=!1}function q(a,e="all"){return`/language/editor/${a}/${e}`}async function B(a){confirm(`Delete ${a.name}?`)&&(await $.remove(a.id),await L())}const M=["https://flagcdn.com/w320/us.png","https://flagcdn.com/w320/fr.png","https://flagcdn.com/w320/de.png","https://flagcdn.com/w320/eg.png","https://flagcdn.com/w320/jp.png"];function T(a){const e=Math.floor(Math.random()*M.length);a.target.src=M[e]}return(a,e)=>(u(),d(N,null,[x(k(z),{title:"Language Management"}),x(K,null,{default:E(()=>[t("div",Q,[e[9]||(e[9]=t("h2",{class:"text-2xl font-semibold text-dash-title mb-6"},"Language Management",-1)),t("div",W,[t("div",X,[t("div",Y,[e[6]||(e[6]=t("h3",{class:"text-xl font-bold text-gray-800 mb-6"},"Add New Language",-1)),t("div",Z,[t("div",null,[y(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>n.value.name=o),type:"text",placeholder:"Language Name",class:"form-input"},null,512),[[C,n.value.name,void 0,{trim:!0}]]),i("name")?(u(),d("p",ee,r(i("name")),1)):v("",!0)]),t("div",null,[y(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>n.value.english_name=o),type:"text",placeholder:"Language Name (English)",class:"form-input"},null,512),[[C,n.value.english_name,void 0,{trim:!0}]]),i("english_name")?(u(),d("p",te,r(i("english_name")),1)):v("",!0)]),t("div",null,[y(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>n.value.code=o),type:"text",placeholder:"Code (e.g., ar, en)",class:"form-input"},null,512),[[C,n.value.code,void 0,{trim:!0}]]),i("code")?(u(),d("p",ae,r(i("code")),1)):v("",!0)]),t("div",null,[y(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>n.value.country_code=o),type:"text",placeholder:"Country Code (e.g., EG, US)",class:"form-input"},null,512),[[C,n.value.country_code,void 0,{trim:!0}]]),i("country_code")?(u(),d("p",ne,r(i("country_code")),1)):v("",!0)]),t("div",null,[t("input",{type:"file",accept:"image/*",class:"form-input",onChange:j},null,32),i("icon")?(u(),d("p",oe,r(i("icon")),1)):v("",!0)]),t("label",se,[y(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>n.value.rtl=o),type:"checkbox"},null,512),[[G,n.value.rtl]]),e[5]||(e[5]=F(" RTL (Right to Left) "))]),t("button",{disabled:b.value,onClick:S,class:"bg-black text-white px-3 py-2 rounded hover:bg-gray-700 disabled:opacity-50"},r(b.value?"Saving…":"+ Add New Language"),9,le)])])]),t("div",ie,[t("div",de,[e[8]||(e[8]=t("h3",{class:"text-lg font-semibold mb-4"},"Languages",-1)),(u(!0),d(N,null,H(c.value,o=>(u(),d("div",{key:o.id,class:"border-b py-3 px-2 flex justify-between items-center"},[t("div",null,[t("div",ue,r(o.name),1),t("div",ce,"Code: "+r(o.code),1)]),t("div",re,[t("img",{src:o.icon_url||`/images/flags/${o.code}.png`,alt:o.name,class:"w-8 h-6 object-cover",onError:T},null,40,ge)]),t("div",pe,[t("div",me,[t("button",{onClick:_=>D(o.id),title:"Edit",class:"text-blue-600 hover:text-blue-800"},[x(k(U),{icon:"mdi:pencil-outline",class:"w-5 h-5"})],8,ve),p.value[o.id]?(u(),d("div",fe,[x(k(J),{class:"block px-4 py-2 text-sm hover:bg-gray-100",href:q(o.id,"all"),onClick:_=>R(o.id)},{default:E(()=>e[7]||(e[7]=[F(" Edit Language keywords ")])),_:2},1032,["href","onClick"])])):v("",!0)]),t("button",{onClick:_=>B(o),title:"Delete",class:"text-red-600 hover:text-red-800"},[x(k(U),{icon:"mdi:trash-can-outline",class:"w-5 h-5"})],8,_e)])]))),128))])])])])]),_:1})],64))}},ke=P(he,[["__scopeId","data-v-3d66d4fa"]]);export{ke as default};
