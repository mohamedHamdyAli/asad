import{m as u,p as g,q as P,f as o,o as l,a as b,u as $,g as D,w as M,b as s,j as N,k as U,F as c,s as m,t as d,e as V}from"./app-srVYKMc4.js";import{_ as B}from"./AuthenticatedLayout-DZhpfcPI.js";import{U as v}from"./users-lehnkgMY.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";const h={list:async()=>{const{data:n}=await u.get("/api/roles");return n.data},show:async n=>{const{data:r}=await u.get(`/api/roles/show/${n}`);return r.data},create:async n=>u.post("/api/roles/create",n),update:async(n,r)=>u.post(`/api/roles/update/${n}`,r),remove:async n=>u.delete(`/api/roles/delete/${n}`)},F={list:async()=>{const{data:n}=await u.get("/api/permissions");return n.data}},T={class:"p-6 space-y-10"},j={class:"bg-white p-6 rounded shadow space-y-4"},q={class:"flex gap-2"},I={class:"w-full text-sm border"},L={class:"p-2 font-medium"},S={class:"p-2"},z={class:"grid grid-cols-3 gap-2"},G=["checked","onChange"],H={class:"p-2"},J=["onClick"],K={class:"bg-white p-6 rounded shadow space-y-4"},O={class:"w-full text-sm border"},Q={class:"p-2"},W={class:"p-2"},X={class:"p-2"},Y=["onChange"],Z=["value"],ss={class:"p-2"},es=["onChange"],ts=["value"],as={__name:"RolesManagement",setup(n){const r=g([]),f=g([]),w=g([]),p=g("");async function _(){r.value=await h.list(),f.value=await F.list(),w.value=await v.list()}async function x(){p.value&&(await h.create({name:p.value}),p.value="",await _())}async function R(i){confirm("Delete role?")&&(await h.remove(i),await _())}async function k(i,e){await h.update(i.id,{permission:e}),await _()}async function C(i,e){e&&await v.assignRole(i,e)}async function A(i,e){e&&await v.assignPermission(i,e)}return P(_),(i,e)=>(l(),o(c,null,[b($(D),{title:"Roles & Permissions"}),b(B,null,{default:M(()=>[s("div",T,[s("section",j,[e[2]||(e[2]=s("h2",{class:"text-xl font-semibold"},"Roles",-1)),s("div",q,[N(s("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>p.value=a),placeholder:"Role name",class:"form-input w-64"},null,512),[[U,p.value]]),s("button",{class:"btn-primary",onClick:x}," Add Role ")]),s("table",I,[e[1]||(e[1]=s("thead",{class:"bg-gray-100"},[s("tr",null,[s("th",{class:"p-2 text-left"},"Role"),s("th",{class:"p-2"},"Permissions"),s("th",{class:"p-2"},"Actions")])],-1)),s("tbody",null,[(l(!0),o(c,null,m(r.value,a=>(l(),o("tr",{key:a.id,class:"border-t"},[s("td",L,d(a.name),1),s("td",S,[s("div",z,[(l(!0),o(c,null,m(f.value,t=>(l(),o("label",{key:t.id,class:"flex items-center gap-1 text-xs"},[s("input",{type:"checkbox",checked:a.permissions.some(y=>y.name===t.name),onChange:y=>k(a,t.name)},null,40,G),V(" "+d(t.name),1)]))),128))])]),s("td",H,[s("button",{class:"btn-danger",onClick:t=>R(a.id)}," Delete ",8,J)])]))),128))])])]),s("section",K,[e[6]||(e[6]=s("h2",{class:"text-xl font-semibold"},"Users",-1)),s("table",O,[e[5]||(e[5]=s("thead",{class:"bg-gray-100"},[s("tr",null,[s("th",{class:"p-2"},"Name"),s("th",{class:"p-2"},"Email"),s("th",{class:"p-2"},"Assign Role"),s("th",{class:"p-2"},"Assign Permission")])],-1)),s("tbody",null,[(l(!0),o(c,null,m(w.value,a=>(l(),o("tr",{key:a.id,class:"border-t"},[s("td",Q,d(a.name),1),s("td",W,d(a.email),1),s("td",X,[s("select",{class:"form-input",onChange:t=>C(a.id,t.target.value)},[e[3]||(e[3]=s("option",{value:""},"—",-1)),(l(!0),o(c,null,m(r.value,t=>(l(),o("option",{key:t.id,value:t.name},d(t.name),9,Z))),128))],40,Y)]),s("td",ss,[s("select",{class:"form-input",onChange:t=>A(a.id,t.target.value)},[e[4]||(e[4]=s("option",{value:""},"—",-1)),(l(!0),o(c,null,m(f.value,t=>(l(),o("option",{key:t.id,value:t.name},d(t.name),9,ts))),128))],40,es)])]))),128))])])])])]),_:1})],64))}},rs=E(as,[["__scopeId","data-v-493799f2"]]);export{rs as default};
